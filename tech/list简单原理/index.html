<!doctype html><html lang=zh dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Listç®€å•åŸç† | ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼</title>
<meta name=keywords content>
<meta name=description content="ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†Hashmap,ä»Šå¤©æ¥çœ‹ä¸€çœ‹Listæ¥å£ä¸‹æœ€ä¸»è¦çš„ä¸¤ä¸ªç±» : ArrayListå’ŒLinkedList æ€ç»´å¯¼å›¾ ArrayList é“¾è¡¨ä¸æ•°ç»„ ä»">
<meta name=author content="Guangfa">
<link rel=canonical href=http://euthpic.github.io/tech/list%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86/>
<meta name=yandex-verification content="73b1a797f62c0e98">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://euthpic.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=http://euthpic.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=http://euthpic.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=http://euthpic.github.io/apple-touch-icon.png>
<link rel=mask-icon href=http://euthpic.github.io/apple-touch-icon.png>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.4">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-136094326-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="Listç®€å•åŸç†">
<meta property="og:description" content="ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†Hashmap,ä»Šå¤©æ¥çœ‹ä¸€çœ‹Listæ¥å£ä¸‹æœ€ä¸»è¦çš„ä¸¤ä¸ªç±» : ArrayListå’ŒLinkedList æ€ç»´å¯¼å›¾ ArrayList é“¾è¡¨ä¸æ•°ç»„ ä»">
<meta property="og:type" content="article">
<meta property="og:url" content="http://euthpic.github.io/tech/list%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86/"><meta property="og:image" content="http://euthpic.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="tech">
<meta property="article:published_time" content="2020-05-06T14:27:19+08:00">
<meta property="article:modified_time" content="2020-05-06T14:27:19+08:00"><meta property="og:site_name" content="ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="http://euthpic.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="Listç®€å•åŸç†">
<meta name=twitter:description content="ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†Hashmap,ä»Šå¤©æ¥çœ‹ä¸€çœ‹Listæ¥å£ä¸‹æœ€ä¸»è¦çš„ä¸¤ä¸ªç±» : ArrayListå’ŒLinkedList æ€ç»´å¯¼å›¾ ArrayList é“¾è¡¨ä¸æ•°ç»„ ä»">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Teches","item":"http://euthpic.github.io/tech/"},{"@type":"ListItem","position":2,"name":"Listç®€å•åŸç†","item":"http://euthpic.github.io/tech/list%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Listç®€å•åŸç†","name":"Listç®€å•åŸç†","description":"ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†Hashmap,ä»Šå¤©æ¥çœ‹ä¸€çœ‹Listæ¥å£ä¸‹æœ€ä¸»è¦çš„ä¸¤ä¸ªç±» : ArrayListå’ŒLinkedList æ€ç»´å¯¼å›¾ ArrayList é“¾è¡¨ä¸æ•°ç»„ ä»","keywords":[],"articleBody":"ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†Hashmap,ä»Šå¤©æ¥çœ‹ä¸€çœ‹Listæ¥å£ä¸‹æœ€ä¸»è¦çš„ä¸¤ä¸ªç±» : ArrayListå’ŒLinkedList\næ€ç»´å¯¼å›¾ ArrayList é“¾è¡¨ä¸æ•°ç»„ ä»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥,ArrayListä½¿ç”¨çš„æ˜¯æ•°ç»„,LinkedListä½¿ç”¨çš„æ˜¯é“¾è¡¨.\n æ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯åœ°å€è¿ç»­çš„,è€Œé“¾è¡¨æ˜¯ç¦»æ•£çš„,æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦è®°å½•å…¶åç»§èŠ‚ç‚¹(åŒå‘é“¾è¡¨åŒæ—¶éœ€è¦è®°å½•å‰èŠ‚ç‚¹) æ•°ç»„åªè¦çŸ¥é“äº†å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€,å°±èƒ½é€šè¿‡è®¡ç®—ç›¸å¯¹åœ°å€æ¥è®¿é—®å…¶ä»–èŠ‚ç‚¹,å› æ­¤æ•°ç»„å¯ä»¥å®ç°ä»»æ„è®¿é—®(ramdaomly access),é€‚åˆè¯»æ“ä½œæ¯”è¾ƒå¤šçš„åœºæ™¯. è®¿é—®é“¾è¡¨ä¸­çš„ä»»æ„èŠ‚ç‚¹éƒ½éœ€è¦ä»å¤´èŠ‚ç‚¹å¼€å§‹éå†,é€ä¸€è·å–å…¶åç»­èŠ‚ç‚¹,å› æ­¤é“¾è¡¨çš„å†™æ“ä½œæ¯”è¾ƒæ…¢.ä½†æ˜¯ä¹Ÿç”±äºåœ°å€ä¸è¿ç»­,åœ¨å¢åˆ èŠ‚ç‚¹æ—¶ä¸éœ€è¦è€ƒè™‘ä½ç½®,ç›´æ¥ä¿®æ”¹ç›¸å…³çš„nextèŠ‚ç‚¹å°±è¡Œäº†,å› æ­¤é“¾è¡¨é€‚åˆé¢‘ç¹å¢åˆ çš„åœºæ™¯.  é“¾è¡¨ä¸æ•°ç»„å„æœ‰ä¼˜ç‚¹å’Œç¼ºç‚¹,è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç³»ç»Ÿè®¾è®¡çš„ä¸€ä¸ªç‰¹ç‚¹ : æ²¡æœ‰å®Œç¾çš„æ–¹æ¡ˆ,æœ‰çš„åªæ˜¯æ ¹æ®ä¸šåŠ¡åœºæ™¯åšå‡ºå–èˆ,è¦ä¹ˆç©ºé—´æ¢æ—¶é—´,è¦ä¹ˆç‰ºç‰²æ•ˆç‡æ¥æé«˜å®‰å…¨æ€§.\næ•°æ®ç»“æ„ å°±æ˜¯ä¸€ä¸ªåå«elementDataçš„æ•°ç»„,é»˜è®¤çš„åˆå§‹é•¿åº¦æ˜¯10;\ntransient Object[] elementData; // non-private to simplify nested class access  /** * Default initial capacity. */ private static final int DEFAULT_CAPACITY = 10; åˆå§‹åŒ– ArrayListæœ‰ä¸‰ä¸ªæ„é€ æ–¹æ³•:\næ— å‚æ—¶è®¾ç½®ä¸ºç©ºæ•°ç»„,ç›´åˆ°ç¬¬ä¸€æ¬¡å¾€listé‡Œé¢addæ•°æ®æ‰ä¼šåˆå§‹åŒ–ä¸ºé•¿åº¦ä¸º10çš„æ•°ç»„.è¿™é‡Œçš„ç›¸å…³é€»è¾‘æœ‰å‡ å±‚è°ƒç”¨é“¾,åé¢æ‰©å®¹çš„æ—¶å€™å†è¯¦ç»†å±•å¼€\npublic ArrayList() { this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;//è®¾ç½®æˆç©ºæ•°ç»„  } private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {}; å‚æ•°ä¸ºé›†åˆæ—¶å°†å…¶è½¬åŒ–ä¸ºæ•°ç»„:\npublic ArrayList(Collection extends E c) { elementData = c.toArray(); if ((size = elementData.length) != 0) { // defend against c.toArray (incorrectly) not returning Object[]  // (see e.g. https://bugs.openjdk.java.net/browse/JDK-6260652)  if (elementData.getClass() != Object[].class) elementData = Arrays.copyOf(elementData, size, Object[].class); } else { // replace with empty array.  this.elementData = EMPTY_ELEMENTDATA; } } å½“å‚æ•°ä¸ºä¸€ä¸ªæ•´å‹,ä¹Ÿå°±æ˜¯æŒ‡å®šæ•°ç»„é•¿åº¦æ—¶,æ–°å»ºä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„æ•°ç»„\npublic ArrayList(int initialCapacity) { if (initialCapacity  0) { this.elementData = new Object[initialCapacity]; } else if (initialCapacity == 0) { this.elementData = EMPTY_ELEMENTDATA;//å½“ä¼ å…¥çš„æ˜¯0,å¤„ç†æ–¹æ³•å’Œæ— å‚æ„é€ çš„ä¸€è‡´  } else { throw new IllegalArgumentException(\"Illegal Capacity: \"+ initialCapacity); } } Add ç”±äºlistçš„get,setéƒ½å¤ªç®€å•,è¿™é‡Œå°±ç›´æ¥è·³è¿‡æ¥åˆ†æaddäº†.å’Œmapä¸€æ ·,addä¹Ÿå¯èƒ½è§¦å‘æ‰©å®¹.\nprivate void add(E e, Object[] elementData, int s) { if (s == elementData.length)//æ‰©å®¹æ¡ä»¶,å½“æ•°ç»„æ»¡äº†çš„æ—¶å€™è¿›è¡Œæ‰©å®¹  elementData = grow(); elementData[s] = e; size = s + 1; } public boolean add(E e) { modCount++; add(e, elementData, size); return true; } public void add(int index, E element) { rangeCheckForAdd(index); modCount++; final int s; Object[] elementData; if ((s = size) == (elementData = this.elementData).length)//ä¹Ÿæ˜¯æ»¡äº†å°±æ‰©å®¹  elementData = grow(); System.arraycopy(elementData, index, elementData, index + 1, s - index);//å¦‚æœåœ¨æ•°ç»„ä¸­é—´æ’å…¥å…ƒç´ ,é‚£ä¹ˆå°±å¾—å¤åˆ¶ä¸€ä¸ªæ–°çš„æ•°ç»„äº†  elementData[index] = element; size = s + 1; }  addä¹‹å‰ä¼šæ£€æŸ¥æ•°ç»„å½“å‰çš„å®¹é‡,çœ‹çœ‹éœ€ä¸éœ€è¦æ‰©å®¹. ç”±äºlistä¸åƒmapé‚£æ ·å¤æ‚,ä¸€ä¸ªä½ç½®åªæœ‰ä¸€ä¸ªå…ƒç´ ,æ‰€ä»¥æ‰©å®¹æ¡ä»¶åªæœ‰ä¸€ä¸ª: æ•°ç»„å·²æ»¡ ç”±äºæ•°ç»„æ˜¯è¿ç»­çš„,å¦‚æœæ˜¯åœ¨æŒ‡å®šä½ç½®æ’å…¥,é‚£ä¹ˆå°±éœ€è¦å¤åˆ¶ä¸€ä¸ªæ–°çš„æ•°ç»„æ¥æ“ä½œäº†.  ä¹Ÿå°±æ˜¯è¯´,å¦‚æœæ•°ç»„å·²æ»¡,ä¸”ä½ åˆè¦å†æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªæ•°æ®,é‚£ä¹ˆæ•°ç»„å°†è¢«å¤åˆ¶ä¸¤æ¬¡.\nä¸€ä¸ªå°å‘ æ¥çœ‹ä¸€æ®µä»£ç \nArrayListInteger list=new ArrayList(10); list.set(5,4); è¿™æ®µä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œå—?\nå¯èƒ½æœ‰äººä¼šè¯´listçš„å¤§å°æ˜¯10,é‚£æˆ‘10ä»¥å†…æ¯”å¦‚å¾€5çš„ä½ç½®setä¸ªå€¼åº”è¯¥æ²¡é—®é¢˜å§.\nå®é™…ä¸Šä¼šæŠ¥ä¸€ä¸ªæ•°ç»„è¶Šç•Œçš„å¼‚å¸¸.\nä¸è¿‡è¿™å¹¶ä¸ç®—çœŸæ­£çš„è¶Šç•Œ,æˆ‘ä»¬çš„æ•°ç»„é•¿åº¦è¿˜æ˜¯10.\npublic E set(int index, E element) { Objects.checkIndex(index, size);//è¾¹ç•Œé€‰ç”¨çš„æ˜¯sizeè€Œä¸æ˜¯length  E oldValue = elementData(index); elementData[index] = element; return oldValue; } @HotSpotIntrinsicCandidate public static X extends RuntimeException int checkIndex(int index, int length, BiFunctionString, ListInteger, X oobef) { if (index  0 || index = length) throw outOfBoundsCheckIndex(oobef, index, length); return index; } ç”±äºlisté‡Œé¢åˆ¤æ–­è¾¹ç•Œç”¨çš„æ˜¯size(å®é™…èŠ‚ç‚¹ä¸ªæ•°),è€Œä¸æ˜¯length(æ•°ç»„é•¿åº¦),æ‰€ä»¥è¿™ç§æƒ…å†µä¼šæŠ¥ä¸€ä¸ª\"è¶Šç•Œ\".\nè¿™ç§å†™æ³•å®é™…ä¸Šæ˜¯æŠŠlistå½“æˆæ•°ç»„æ¥ç”¨äº†.\nå®˜æ–¹è®¤ä¸ºè™½ç„¶elementDataæ˜¯listçš„å®ç°ç»†èŠ‚,ä½†æ˜¯å®ƒå¯¹å¤–ç•Œæ˜¯éšè—çš„,åªèƒ½æ“ä½œé€»è¾‘ä¸Šçš„listè€Œä¸æ˜¯å®é™…å­˜åœ¨çš„elementData.\nå°è£…çš„ä¸€å¤§æ„ä¹‰,å°±æ˜¯å‘ç”¨æˆ·å±è”½ç”¨æˆ·ä¸éœ€è¦çš„æ“ä½œ.å¦åˆ™,ç”¨æˆ·å¯èƒ½ä¼šæœ‰æ„æ— æ„åœ°è°ƒç”¨è¿™äº›æ“ä½œ,è¿™å°†æˆä¸ºè½¯ä»¶å·¥ç¨‹ä¸­é‡è¦çš„bugæ¥æº.\nå¦‚æœlisté‡Œé¢è¿˜æ²¡æœ‰å…ƒç´ ,é‚£ä¹ˆä½ åªèƒ½add,ä¸èƒ½get,set.\nå¦‚æœlistçš„sizeæ˜¯5,é‚£ä¹ˆä½ å°±ä¸èƒ½è®¿é—®ç¬¬äº”ä¸ªå…ƒç´ ä¹‹åçš„ä½ç½®.\nlistçš„addè¿˜æ²¡èµ°åˆ°åé¢çš„ä½ç½®,ä½ å°±ä¸èƒ½æå‰å»putæˆ–è€…set.\næ‰©å®¹ åœ¨listé‡Œé¢,æ‰©å®¹çš„å‡½æ•°æ˜¯grow().\nprivate Object[] grow(int minCapacity) { return elementData = Arrays.copyOf(elementData, newCapacity(minCapacity)); } private Object[] grow() { return grow(size + 1);//æ‰©å®¹åæ•°ç»„é•¿åº¦æœ€å°‘+1  } è¿™é‡Œè°ƒç”¨äº†Arrays.copyOf(),è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯å°†æ—§æ•°ç»„çš„å†…å®¹å¤åˆ¶åˆ°æ–°çš„æ•°ç»„,æ–°æ•°ç»„å¤šå‡ºæ¥çš„éƒ¨åˆ†ç½®ä¸ºnull.\né‡Œé¢æ˜¯ä¸ªnativeæ–¹æ³•,æºç å°±ä¸è´´äº†.\nè¿™é‡Œè¿˜è°ƒç”¨äº†newCapacity(),è¿™ä¸ªæ–¹æ³•ç”¨äºåˆ¤æ–­æ–°æ•°ç»„çš„é•¿åº¦.\nprivate int newCapacity(int minCapacity) { // overflow-conscious code  int oldCapacity = elementData.length; int newCapacity = oldCapacity + (oldCapacity  1);//æ–°æ•°ç»„é•¿åº¦ä¸ºåŸæ¥çš„1.5å€,å‘ä¸‹å–æ•´  if (newCapacity - minCapacity  0) { if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA)//åˆå§‹åŒ–,æ•°ç»„ä¸ºç©º,åˆ™é•¿åº¦è®¾ä¸º10  return Math.max(DEFAULT_CAPACITY, minCapacity); if (minCapacity  0) // overflow  throw new OutOfMemoryError(); return minCapacity; } return (newCapacity - MAX_ARRAY_SIZE  0) ? newCapacity : hugeCapacity(minCapacity); } è¿™é‡Œå…³é”®çš„ä¸¤æ¡è¡¨è¾¾å¼:\n newCapacity = oldCapacity + (oldCapacity Â» 1) if (newCapacity - minCapacity  ä»€ä¹ˆæƒ…å†µä¸‹ç¬¬äºŒæ¡è¡¨è¾¾å¼ä¸ºtrueå‘¢?\n å½“oldCapacity=0,minCapacity=0+1=1,newCapacity=0+0=0,é‚£ä¹ˆnewCapacity - minCapacity=-1 æ•°ç»„ä¸ºç©ºçš„æƒ…å†µ,ä¹Ÿå°±æ˜¯ä¸Šé¢æˆ‘ä»¬è¯´çš„æ— å‚æ„é€ æ–¹æ³•ä¼šèµ°åˆ°è¿™æ¡é€»è¾‘,å°†æ•°ç»„åˆå§‹åŒ–é•¿åº¦ä¸º10. å½“0æ•°ç»„é•¿åº¦+1. å…¶ä½™æƒ…å†µnewCapacity - minCapacity0,æ­¤æ—¶æ–°æ•°ç»„é•¿åº¦=newCapacity,ä¹Ÿå°±æ˜¯åŸæ¥çš„1.5å€(å‘ä¸‹å–æ•´)  çœ‹åˆ°è¿™é‡Œ,ä¹Ÿè®¸ä½ ä¼šé»˜é»˜æ€»ç»“ :\nå“¦,åŸæ¥æ‰©å®¹å,é™¤äº†åˆå§‹åŒ–å¤–,æ•°ç»„çš„é•¿åº¦æœ‰ä¸¤ç§æƒ…å†µ,ä¸€ç§æ˜¯+1,ä¸€ç§æ˜¯+50%\nå…¶å®å½“åŸé•¿åº¦=2æˆ–3æ—¶,æ‰©å®¹åå®ƒä»¬è™½ç„¶ä¹Ÿæ˜¯é•¿åº¦+1,ä½†æ˜¯1ä¹Ÿæ˜¯2å’Œ3çš„50%(å‘ä¸‹å–æ•´).\næ‰€ä»¥çœ‹åˆ°æ²¡æœ‰,å¦‚æœè®©æˆ‘ä»¬æ¥å†™è¿™æ®µé€»è¾‘,å¯èƒ½æˆ‘ä»¬çš„æ€è·¯æ˜¯è¿™æ ·:\n  if æ•°ç»„é•¿åº¦=0, thenâ€¦.\n  if æ•°ç»„é•¿åº¦=1, thenâ€¦\n  è€ŒJDKçš„å¤§ç¥ä»¬ç”¨ä¸€ä¸¤æ¡è¡¨è¾¾å¼å°±æŠŠå„ç§æƒ…å†µæ¸…æ¸…æ¥šæ¥šåœ°åˆ†éš”å¼€äº†.ä¸ç¦è†œæ‹œâ€¦â€¦\nç¼©å®¹ ArrayListæ²¡æœ‰è‡ªåŠ¨ç¼©å®¹çš„æœºåˆ¶,ä¸è¿‡å®ƒæä¾›äº†ä¸€ä¸ªæ–¹æ³•æŠŠlistçš„å®¹é‡æœ€å°åŒ–(åˆšå¥½è£…å¾—ä¸‹æ‰€æœ‰å…ƒç´ )\npublic void trimToSize() { modCount++; if (size  elementData.length) { elementData = (size == 0) ? EMPTY_ELEMENTDATA : Arrays.copyOf(elementData, size);//åŒæ ·æ˜¯å¤åˆ¶  } } Remove å’Œaddä¸€æ ·,removeä¸€æ ·éœ€è¦é€šè¿‡å¤åˆ¶æ•°ç»„æ¥è¿›è¡Œ.\nä½†æœ‰ä¸€ç‚¹ä¸ä¸€æ ·,addä¸æŒ‡å®šä½ç½®æ—¶,é»˜è®¤æ’å…¥åˆ°æœ«å°¾,æ­¤æ—¶ä¸éœ€è¦å¤åˆ¶.\nè€Œremoveä¸æŒ‡å®šä½ç½®æ—¶,é»˜è®¤ä»å¤´å¼€å§‹æ‰¾,ç„¶ååˆ é™¤æ‰¾åˆ°çš„ä¸€ä¸ªå…ƒç´ .é‚£ä¹ˆåˆ é™¤çš„å…ƒç´ ä½ç½®ä¸ç¡®å®š,æ‰€ä»¥éƒ½å½“æˆåˆ é™¤ä¸­é—´çš„èŠ‚ç‚¹æ¥å¤„ç†,å› æ­¤ä¸è®ºå“ªç§æƒ…å†µéƒ½éœ€è¦å¤åˆ¶æ•°ç»„.\nä¹Ÿè®¸æœ‰äººä¼šå»ºè®®ä½œè€…æ‰¾åˆ°å¯¹åº”å…ƒç´ ååˆ¤æ–­ä¸€ä¸‹æ˜¯å¦æœ«å°¾å…ƒç´ ,å¦‚æœæ˜¯ç›´æ¥ç½®nullä¸å°±èŠ‚çœäº†ä¸€æ¬¡å¤åˆ¶çš„æ“ä½œäº†?\næˆ‘ä»¥ä¸º,åœ¨å®é™…æƒ…å†µä¸­,è¦åˆ é™¤çš„èŠ‚ç‚¹æ°å¥½ä½äºæœ«å°¾æ˜¯å°æ¦‚ç‡äº‹ä»¶,ä¸ºäº†è¿™å°æ¦‚ç‡äº‹ä»¶è€Œæ¯æ¬¡éƒ½é¢å¤–åˆ¤æ–­ä¸€æ¬¡ææ€•åˆ’ä¸æ¥.\nåˆ é™¤æŒ‡å®šä½ç½®:\npublic E remove(int index) { Objects.checkIndex(index, size); final Object[] es = elementData; @SuppressWarnings(\"unchecked\") E oldValue = (E) es[index]; fastRemove(es, index); return oldValue; } æ ¹æ®**equals()**åˆ é™¤æŒ‡å®šå…ƒç´ \npublic boolean remove(Object o) { final Object[] es = elementData; final int size = this.size; int i = 0; found: { if (o == null) { for (; i  size; i++) if (es[i] == null)//nullä¹Ÿå¯ä»¥åˆ ,éƒ½æ˜¯åˆ é™¤æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ª  break found; } else { for (; i  size; i++) if (o.equals(es[i])) break found; } return false; } fastRemove(es, i); return true; } private void fastRemove(Object[] es, int i) { modCount++; final int newSize; if ((newSize = size - 1)  i) System.arraycopy(es, i + 1, es, i, newSize - i);//å¤åˆ¶åˆ°æ–°æ•°ç»„  es[size = newSize] = null;//æœ€åä¸€ä¸ªä½ç½®è®¾ä¸ºnull  } ç®€å•æ¦‚æ‹¬ä¸‹æµç¨‹:\n å…ˆéå†å»æŸ¥æ‰¾å…ƒç´ ,å…ƒç´ æ˜¯nullåˆ™æ‰¾null,å…ƒç´ énullåˆ™è°ƒç”¨equals()æ¥æ¯”è¾ƒ. åˆ é™¤æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ ,ç„¶åå‰©ä½™å…ƒç´ å¤åˆ¶åˆ°æ–°çš„æ•°ç»„. æ–°æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®è®¾ä¸ºnull  æ·±å…‹éš†/æµ…å…‹éš† è¿™ä¸ªåœ¨Hashmapé‚£ç¯‡æ–‡ç« å¿˜äº†è®²,åœ¨è¿™é‡Œè¡¥å›æ¥.\nå…ˆçœ‹ä¸‹å®šä¹‰:\næµ…å…‹éš†\nè¢«å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡éƒ½å«æœ‰ä¸åŸæ¥çš„å¯¹è±¡ç›¸åŒçš„å€¼ï¼Œè€Œæ‰€æœ‰çš„å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ã€‚æ¢è¨€ä¹‹ï¼Œæµ…å¤åˆ¶ä»…ä»…å¤åˆ¶æ‰€æ‹·è´çš„å¯¹è±¡ï¼Œè€Œä¸å¤åˆ¶å®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡ã€‚ æ·±å…‹éš†\nè¢«å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡éƒ½å«æœ‰ä¸åŸæ¥çš„å¯¹è±¡ç›¸åŒçš„å€¼ï¼Œé™¤å»é‚£äº›å¼•ç”¨å…¶ä»–å¯¹è±¡çš„å˜é‡ã€‚é‚£äº›å¼•ç”¨å…¶ä»–å¯¹è±¡çš„å˜é‡å°†æŒ‡å‘è¢«å¤åˆ¶è¿‡çš„æ–°å¯¹è±¡ï¼Œè€Œä¸å†æ˜¯åŸæœ‰çš„é‚£äº›è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚æ¢è¨€ä¹‹ï¼Œæ·±å¤åˆ¶æŠŠè¦å¤åˆ¶çš„å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡éƒ½å¤åˆ¶äº†ä¸€éã€‚ å…¶å®å®ƒä»¬çš„åŒºåˆ«ä¹Ÿå°±æ˜¯å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«.\næµ…å…‹éš†=å¼•ç”¨ä¼ é€’ æ·±å…‹éš†=å€¼ä¼ é€’\nåœ¨æˆ‘å°è±¡ä¸­,JDKå¥½åƒæ²¡æœ‰å‡ ä¸ªç±»æ˜¯å®ç°æ·±å…‹éš†çš„,æ‰€ä»¥å¦‚æœä¸æƒ³å¤åˆ¶åçš„æ–°å¯¹è±¡ä¸æ—§å¯¹è±¡ç›¸äº’å¹²æ‰°,åœ¨å¤åˆ¶ä¹‹å‰è¦é‡å†™clone()æ–¹æ³•.\nArrayListçš„å…‹éš†æ–¹æ³•\n/** * Returns a shallow copy of this {@code ArrayList} instance. (The * elements themselves are not copied.) * * @return a clone of this {@code ArrayList} instance */ public Object clone() { try { ArrayList v = (ArrayList) super.clone(); v.elementData = Arrays.copyOf(elementData, size); v.modCount = 0; return v; } catch (CloneNotSupportedException e) { // this shouldn't happen, since we are Cloneable  throw new InternalError(e); } } æ³¨é‡Šå†™çš„å¾ˆæ˜ç™½äº†,æ˜¯æµ…å¤åˆ¶(shallow copy).é™¤äº†modCountç½®0ä¹‹å¤–,æ•°ç»„ä¹Ÿæ˜¯ç›´æ¥å¤åˆ¶è¿‡å»çš„.\nå¦‚æœæ”¹æˆæ·±å…‹éš†çš„è¯,åº”è¯¥è¦éå†æ•°ç»„,ä¾æ¬¡è°ƒç”¨æ¯ä¸ªå…ƒç´ çš„cloneæ–¹æ³•è€Œä¸æ˜¯ç›´æ¥å¤åˆ¶.(è¦æ³¨æ„å¥—å¨ƒçš„æƒ…å†µ)\nLinkedList æ•°æ®ç»“æ„ LinkedListæœ‰ä¸€ä¸ªå†…éƒ¨ç±»Node,è¿™å°±æ˜¯å­˜å–æ•°æ®çš„ç»“æ„äº†.\nprivate static class NodeE { E item; NodeE next; NodeE prev; Node(NodeE prev, E element, NodeE next) { this.item = element; this.next = next; this.prev = prev; } } å¾ˆå…¸å‹çš„åŒå‘é“¾è¡¨äº†.\næ­¤å¤–LinkedListå†…éƒ¨ä¹ŸæŒæœ‰å¤´å°¾åŒæŒ‡é’ˆ.\nç”±äºé“¾è¡¨ä¸å­˜åœ¨æ‰©å®¹çš„æ¦‚å¿µ,å› æ­¤sizeæ˜¯é“¾è¡¨çš„é•¿åº¦ä¹Ÿæ˜¯å®é™…å…ƒç´ çš„ä¸ªæ•°.\ntransient int size = 0; /** * Pointer to first node. */ transient NodeE first; /** * Pointer to last node. */ transient NodeE last; åˆå§‹åŒ– æ¥çœ‹ä¸€ä¸‹æ„é€ å‡½æ•°\npublic LinkedList() { } public LinkedList(Collection extends E c) { this(); addAll(c); } ç©ºçš„.\næ²¡é”™æ˜¯ç©ºçš„,å®ƒä¸éœ€è¦åƒArrayListå…ˆæ„é€ å‡ºä¸€ä¸ªæ•°ç»„é‚£æ ·ç°å»æ„é€ å‡ºfirstèŠ‚ç‚¹.\nfirstæ˜¯nullçš„å°±è®©å®ƒæš‚æ—¶nullå§,ç­‰åˆ°addç¬¬ä¸€ä¸ªå…ƒç´ å†å»æ„é€ .\nAdd public boolean add(E e) {//æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹,é»˜è®¤æ’å…¥é“¾å°¾  linkLast(e); return true; } public void add(int index, E element) {//å¾€ç‰¹å®šä½ç½®æ’å…¥  checkPositionIndex(index); if (index == size) linkLast(element); else linkBefore(element, node(index)); } public void addFirst(E e) {//å¾€å¤´éƒ¨æ’å…¥  linkFirst(e); } public void addLast(E e) {å¾€å°¾éƒ¨æ’å…¥ linkLast(e); } å¯ä»¥çœ‹åˆ°LinkedListæ”¯æŒå¾€ä»»æ„ä½ç½®æ’å…¥å…ƒç´ .\næ ¹æ®linkFirst,linkBefore,linkLast,æ’å…¥å¯åˆ†ä¸º3ç§æƒ…å†µ:\n æ’å…¥å¤´éƒ¨ æ’å…¥åˆ°æŸå…ƒç´ å‰é¢ æ’å…¥å°¾éƒ¨  private void linkFirst(E e) { final NodeE f = first; final NodeE newNode = new Node(null, e, f);//å°ç»†èŠ‚,è¿™é‡Œæ˜¯æ–°å»ºä¸€ä¸ªnodeè€Œä¸æ˜¯ç›´æ¥èµ‹å€¼  first = newNode;//newèŠ‚ç‚¹å˜ä¸ºfirstèŠ‚ç‚¹  if (f == null)//é“¾è¡¨æ˜¯ç©ºçš„,é‚£ä¹ˆfirstèŠ‚ç‚¹å’ŒlastèŠ‚ç‚¹éƒ½åŒæ—¶ä¸ºnewèŠ‚ç‚¹  last = newNode; else f.prev = newNode;//åŸfirstèŠ‚ç‚¹çš„å‰é©±å˜ä¸ºnewèŠ‚ç‚¹  size++; modCount++; } void linkBefore(E e, NodeE succ) { // assert succ != null;  final NodeE pred = succ.prev;//è®°å½•è¯¥èŠ‚ç‚¹çš„å‰é©±  final NodeE newNode = new Node(pred, e, succ); succ.prev = newNode;//è¯¥èŠ‚ç‚¹çš„å‰é©±ä¸ºnewèŠ‚ç‚¹  if (pred == null)//è¯¥èŠ‚ç‚¹çš„å‰é©±ä¸ºnull,ä¹Ÿå°±æ˜¯è¯¥èŠ‚ç‚¹ä¸ºfirstèŠ‚ç‚¹  first = newNode; else pred.next = newNode;//å‰é©±çš„nextæŒ‡å‘æ–°èŠ‚ç‚¹  size++; modCount++; } void linkLast(E e) { final NodeE l = last; final NodeE newNode = new Node(l, e, null); last = newNode; if (l == null) first = newNode; else l.next = newNode; size++; modCount++; } å¸¸è§„çš„é“¾è¡¨æ“ä½œäº†,å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ : æ’å…¥çš„ä¸æ˜¯èŠ‚ç‚¹æœ¬èº«,è€Œæ˜¯å®ƒçš„å¤åˆ¶.\nåº”è¯¥è¯´,è¿™é‡Œç”¨åˆ°çš„åªæ˜¯è¿™ä¸ªèŠ‚ç‚¹çš„å€¼,è€Œä¸éœ€è¦çŸ¥é“å®ƒå‰é©±èŠ‚ç‚¹ä»¥åŠåç»§èŠ‚ç‚¹çš„ä¿¡æ¯.\næ‰€ä»¥å¯¹é“¾è¡¨ä»»æ„æ“ä½œå¹¶ä¸ä¼šå½±å“æ’å…¥æ—¶å‚è€ƒè¿‡çš„é‚£äº›èŠ‚ç‚¹.\nRemove public E remove() {//é»˜è®¤åˆ é™¤å¤´èŠ‚ç‚¹  return removeFirst(); } public E removeFirst() { final NodeE f = first; if (f == null)//é“¾è¡¨ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸  throw new NoSuchElementException(); return unlinkFirst(f); } public E removeLast() {//åˆ é™¤å°¾èŠ‚ç‚¹  final NodeE l = last; if (l == null)//é“¾è¡¨ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸  throw new NoSuchElementException(); return unlinkLast(l); } public E remove(int index) {//åˆ é™¤æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹  checkElementIndex(index); return unlink(node(index));//node(index)ä½œç”¨æ˜¯è¿”å›indexä½ç½®çš„èŠ‚ç‚¹  } public boolean remove(Object o) {//åˆ é™¤æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæŒ‡å®šçš„å…ƒç´   if (o == null) { for (NodeE x = first; x != null; x = x.next) { if (x.item == null) { unlink(x); return true; } } } else { for (NodeE x = first; x != null; x = x.next) { if (o.equals(x.item)) { unlink(x); return true; } } } return false; } åˆ é™¤ä¹Ÿæ˜¯æ”¯æŒæŒ‡å®šä»»æ„ä½ç½®,ä»»æ„å…ƒç´ çš„.\nåˆ é™¤åŒæ ·åˆ†ä¸ºä¸‰ç§æƒ…å†µ:\n åˆ é™¤å¤´èŠ‚ç‚¹ åˆ é™¤å°¾èŠ‚ç‚¹ åˆ é™¤ä¸­é—´èŠ‚ç‚¹  private E unlinkFirst(NodeE f) { // assert f == first \u0026\u0026 f != null;  final E element = f.item;//è®°å½•è¿”å›å€¼  final NodeE next = f.next;//è®°å½•åé©±  f.item = null;//é‡Šæ”¾èŠ‚ç‚¹çš„èµ„æº, help GCå°±å¾ˆéªšäº†....  f.next = null; // help GC  first = next;//firstèŠ‚ç‚¹åç§»  if (next == null) last = null;//è‹¥é“¾è¡¨åªæœ‰ä¸€ä¸ªfirstèŠ‚ç‚¹,é‚£ä¹ˆåˆ é™¤ålastä¹Ÿä¸ºnull  else next.prev = null;//å¦åˆ™nextçš„å‰é©±ç½®ä¸ºnull,è¿™é‡Œä¹Ÿå¯ä»¥å†™æˆfirst.prev=null  size--; modCount++; return element; } private E unlinkLast(NodeE l) { // assert l == last \u0026\u0026 l != null;  final E element = l.item; final NodeE prev = l.prev; l.item = null; l.prev = null; // help GC  last = prev; if (prev == null) first = null; else prev.next = null; size--; modCount++; return element; } E unlink(NodeE x) { // assert x != null;  final E element = x.item; final NodeE next = x.next; final NodeE prev = x.prev; if (prev == null) { first = next; } else { prev.next = next; x.prev = null; } if (next == null) { last = prev; } else { next.prev = prev; x.next = null; } x.item = null; size--; modCount++; return element; } é“¾è¡¨çš„æ“ä½œä¹Ÿå¾ˆç®€å•,å°±ä¸å†™é‚£ä¹ˆå¤šæ³¨é‡Šäº†(ä¸ºå·æ‡’æ‰¾ä¸ªæ¥å£).\nâ€œäºŒåˆ†æŸ¥æ‰¾â€? é“¾è¡¨çš„å­˜å–å¾ˆç®€å•,æœ¬æ¥æƒ³ç›´æ¥è·³è¿‡çš„,ä¸è¿‡è¿™æ¬¡çœ‹æºç åˆæ–°å‘ç°äº†ä¸€ä¸ªå°çš„ä¼˜åŒ–ç‚¹,å°±é¡ºä¾¿æä¸€ä¸‹.\nåœ¨ä¸Šé¢removeæ“ä½œæ—¶æœ‰ä¸ªnode(idnex),è¿™ä¸ªå‡½æ•°åœ¨getå’Œsetä¸­ä¹Ÿç”¨åˆ°.\nNodeE node(int index) { // assert isElementIndex(index);  if (index  (size  1)) {//åˆ¤æ–­indexä½äºé“¾è¡¨çš„å‰åŠéƒ¨åˆ†è¿˜æ˜¯ååŠéƒ¨åˆ†  NodeE x = first; for (int i = 0; i  index; i++) x = x.next; return x; } else { NodeE x = last; for (int i = size - 1; i  index; i--) x = x.prev; return x; } } å‰é¢æåˆ°è¿‡,LinkedListæ˜¯æ”¯æŒæ“ä½œä»»æ„èŠ‚ç‚¹çš„.\nè€Œæˆ‘ä»¬åˆçŸ¥é“,é“¾è¡¨çš„èŠ‚ç‚¹åœ°å€æ˜¯ç¦»æ•£çš„,é‚£ä¹ˆè®¿é—®ä¸­é—´çš„èŠ‚ç‚¹ä¸€å®šè¦ä»firstèŠ‚ç‚¹å¼€å§‹éå†å—?\nç”±äºæ˜¯åŒå‘é“¾è¡¨,JDKåœ¨è®¿é—®Linkedlistå‰,ä¼šå…ˆç”¨ if (index  1))åˆ¤æ–­ä¸€ä¸‹è¦è®¿é—®çš„èŠ‚ç‚¹ä½äºå‰åŠéƒ¨åˆ†è¿˜æ˜¯ååŠéƒ¨åˆ†.\nå¦‚æœæ˜¯å‰åŠéƒ¨åˆ†,å°±ä»firstèŠ‚ç‚¹å‘åéå†;\nå¦‚æœæ˜¯ååŠéƒ¨åˆ†,å°±ä»lastèŠ‚ç‚¹å‘å‰éå†.\næœ€å¥½çš„æƒ…å†µä¸‹,è¿™æ ·çš„ä¼˜åŒ–å¯ä»¥æŠŠæ—¶é—´ä»O(n)é™ä½åˆ°O(1).\nè¿™ä¸ªé—®é¢˜å¹¶ä¸éš¾,åªè¦æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜éƒ½èƒ½å›ç­”ä¸Šæ¥.\né—®é¢˜åªåœ¨äºæ„è¯†.\nå†™è¿™ä¸€éƒ¨åˆ†æ˜¯ä¸ºäº†æé†’è‡ªå·±åœ¨ä¸€äº›å°ç»†èŠ‚ä¸Šä¸è¦å¿˜äº†ä¼˜åŒ–çš„æ„è¯†.\né˜Ÿåˆ— \u0026 åŒå‘é˜Ÿåˆ— \u0026 æ ˆ LinkedListä½œä¸ºåŒå‘é“¾è¡¨,å¯ä»¥åŒæ—¶ä½œä¸ºé˜Ÿåˆ—/åŒå‘é˜Ÿåˆ—/æ ˆæ¥ä½¿ç”¨.\nä½œä¸ºé˜Ÿåˆ—æ—¶:\n peek : è¿”å›å¤´èŠ‚ç‚¹(å¹¶éåˆ é™¤) poll : è¿”å›å¹¶åˆ é™¤å¤´èŠ‚ç‚¹(å‡ºé˜Ÿ) offer : é˜Ÿå°¾æ–°å¢èŠ‚ç‚¹(å…¥é˜Ÿ,ç­‰åŒäºadd)  ä½œä¸ºåŒå‘é˜Ÿåˆ—æ—¶:\n push : é˜Ÿé¦–æ–°å¢èŠ‚ç‚¹(å…¥æ ˆ) pop : è¿”å›å¹¶åˆ é™¤å¤´èŠ‚ç‚¹(å‡ºæ ˆ)  è¿˜æœ‰å¾ˆå¤šapi,åƒpeekFirst,pollLastç­‰ç­‰.ä¸åˆ—ä¸¾äº†.\napiä¸ç”¨èƒŒçš„,ç”¨åˆ°çš„æ—¶å€™å¿˜äº†,ç‚¹è¿›æºç çœ‹ä¸‹æ³¨é‡Š,ä¸€ä¸‹å°±è®°èµ·æ¥äº†.\nClone /** * Returns a shallow copy of this {@code LinkedList}. (The elements * themselves are not cloned.) * * @return a shallow copy of this {@code LinkedList} instance */ public Object clone() { LinkedListE clone = superClone(); // Put clone into \"virgin\" state  clone.first = clone.last = null; clone.size = 0; clone.modCount = 0; // Initialize clone with our elements  for (NodeE x = first; x != null; x = x.next) clone.add(x.item); return clone; } å’ŒArrayListä¸€æ ·,ä¹Ÿæ˜¯æµ…å¤åˆ¶\n","wordCount":"5814","inLanguage":"zh","datePublished":"2020-05-06T14:27:19+08:00","dateModified":"2020-05-06T14:27:19+08:00","author":{"@type":"Person","name":"Guangfa"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://euthpic.github.io/tech/list%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86/"},"publisher":{"@type":"Organization","name":"ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼","logo":{"@type":"ImageObject","url":"http://euthpic.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=http://euthpic.github.io/ accesskey=h title="ğŸ¡ ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼ (Alt + H)">ğŸ¡ ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=http://euthpic.github.io/categories/ title="ğŸ“” ç³»åˆ—">
<span>ğŸ“” ç³»åˆ—</span>
</a>
</li>
<li>
<a href=http://euthpic.github.io/tags/ title="ğŸ·ï¸ æ ‡ç­¾">
<span>ğŸ·ï¸ æ ‡ç­¾</span>
</a>
</li>
<li>
<a href=http://euthpic.github.io/search/ title="ğŸ” æœç´¢ (Alt + /)" accesskey=/>
<span>ğŸ” æœç´¢</span>
</a>
</li>
<li>
<a href=https://travellings.link title=ğŸš‡>
<span>ğŸš‡</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=http://euthpic.github.io/>ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=http://euthpic.github.io/tech/>Teches</a></div>
<h1 class=post-title>
Listç®€å•åŸç†
</h1>
<div class=post-meta><span title="2020-05-06 14:27:19 +0800 CST">May 6, 2020</span>&nbsp;Â·&nbsp;12 åˆ†é’Ÿ&nbsp;Â·&nbsp;Guangfa&nbsp;|&nbsp;<a href=https://github.com/euthpic/euthpic.github.io/edit/main/content/tech/List%e7%ae%80%e5%8d%95%e5%8e%9f%e7%90%86.md rel="noopener noreferrer" target=_blank>PR</a>
</div>
</header> <div class=toc>
<details open>
<summary accesskey=c title="(Alt + C)">
<span class=details>ç›®å½•</span>
</summary>
<div class=inner><ul>
<li>
<a href=#%e6%80%9d%e7%bb%b4%e5%af%bc%e5%9b%be aria-label=æ€ç»´å¯¼å›¾>æ€ç»´å¯¼å›¾</a></li>
<li>
<a href=#arraylist aria-label=ArrayList>ArrayList</a><ul>
<li>
<a href=#%e9%93%be%e8%a1%a8%e4%b8%8e%e6%95%b0%e7%bb%84 aria-label=é“¾è¡¨ä¸æ•°ç»„>é“¾è¡¨ä¸æ•°ç»„</a></li>
<li>
<a href=#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84 aria-label=æ•°æ®ç»“æ„>æ•°æ®ç»“æ„</a></li>
<li>
<a href=#%e5%88%9d%e5%a7%8b%e5%8c%96 aria-label=åˆå§‹åŒ–>åˆå§‹åŒ–</a></li>
<li>
<a href=#add aria-label=Add>Add</a><ul>
<li>
<a href=#%e4%b8%80%e4%b8%aa%e5%b0%8f%e5%9d%91 aria-label=ä¸€ä¸ªå°å‘>ä¸€ä¸ªå°å‘</a></li></ul>
</li>
<li>
<a href=#%e6%89%a9%e5%ae%b9 aria-label=æ‰©å®¹>æ‰©å®¹</a><ul>
<li>
<a href=#%e7%bc%a9%e5%ae%b9 aria-label=ç¼©å®¹>ç¼©å®¹</a></li></ul>
</li>
<li>
<a href=#remove aria-label=Remove>Remove</a></li>
<li>
<a href=#%e6%b7%b1%e5%85%8b%e9%9a%86%e6%b5%85%e5%85%8b%e9%9a%86 aria-label=æ·±å…‹éš†/æµ…å…‹éš†>æ·±å…‹éš†/æµ…å…‹éš†</a></li></ul>
</li>
<li>
<a href=#linkedlist aria-label=LinkedList>LinkedList</a><ul>
<li>
<a href=#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84-1 aria-label=æ•°æ®ç»“æ„>æ•°æ®ç»“æ„</a></li>
<li>
<a href=#%e5%88%9d%e5%a7%8b%e5%8c%96-1 aria-label=åˆå§‹åŒ–>åˆå§‹åŒ–</a></li>
<li>
<a href=#add-1 aria-label=Add>Add</a></li>
<li>
<a href=#remove-1 aria-label=Remove>Remove</a></li>
<li>
<a href=#%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be aria-label=&amp;ldquo;äºŒåˆ†æŸ¥æ‰¾&amp;rdquo;?>&ldquo;äºŒåˆ†æŸ¥æ‰¾&rdquo;?</a></li>
<li>
<a href=#%e9%98%9f%e5%88%97--%e5%8f%8c%e5%90%91%e9%98%9f%e5%88%97--%e6%a0%88 aria-label="é˜Ÿåˆ— &amp;amp; åŒå‘é˜Ÿåˆ— &amp;amp; æ ˆ">é˜Ÿåˆ— & åŒå‘é˜Ÿåˆ— & æ ˆ</a></li>
<li>
<a href=#clone aria-label=Clone>Clone</a>
</li>
</ul>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†Hashmap,ä»Šå¤©æ¥çœ‹ä¸€çœ‹Listæ¥å£ä¸‹æœ€ä¸»è¦çš„ä¸¤ä¸ªç±» : ArrayListå’ŒLinkedList</p>
<h1 id=æ€ç»´å¯¼å›¾>æ€ç»´å¯¼å›¾</h1>
<p><img loading=lazy src=https://tva1.sinaimg.cn/large/006P3Jr6gy1h3qka63d7hj31c41pg10y.jpg alt=List>
</p>
<h1 id=arraylist>ArrayList</h1>
<h2 id=é“¾è¡¨ä¸æ•°ç»„>é“¾è¡¨ä¸æ•°ç»„</h2>
<p>ä»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥,ArrayListä½¿ç”¨çš„æ˜¯æ•°ç»„,LinkedListä½¿ç”¨çš„æ˜¯é“¾è¡¨.</p>
<ul>
<li>æ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯<strong>åœ°å€è¿ç»­</strong>çš„,è€Œé“¾è¡¨æ˜¯<strong>ç¦»æ•£</strong>çš„,æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦è®°å½•å…¶åç»§èŠ‚ç‚¹(åŒå‘é“¾è¡¨åŒæ—¶éœ€è¦è®°å½•å‰èŠ‚ç‚¹)</li>
<li>æ•°ç»„åªè¦çŸ¥é“äº†å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€,å°±èƒ½é€šè¿‡è®¡ç®—<strong>ç›¸å¯¹åœ°å€</strong>æ¥è®¿é—®å…¶ä»–èŠ‚ç‚¹,å› æ­¤æ•°ç»„å¯ä»¥å®ç°ä»»æ„è®¿é—®(ramdaomly access),é€‚åˆ<strong>è¯»æ“ä½œæ¯”è¾ƒå¤š</strong>çš„åœºæ™¯.</li>
<li>è®¿é—®é“¾è¡¨ä¸­çš„ä»»æ„èŠ‚ç‚¹éƒ½éœ€è¦ä»å¤´èŠ‚ç‚¹å¼€å§‹éå†,é€ä¸€è·å–å…¶åç»­èŠ‚ç‚¹,å› æ­¤é“¾è¡¨çš„å†™æ“ä½œæ¯”è¾ƒæ…¢.ä½†æ˜¯ä¹Ÿç”±äºåœ°å€ä¸è¿ç»­,åœ¨å¢åˆ èŠ‚ç‚¹æ—¶ä¸éœ€è¦è€ƒè™‘ä½ç½®,ç›´æ¥ä¿®æ”¹ç›¸å…³çš„nextèŠ‚ç‚¹å°±è¡Œäº†,å› æ­¤é“¾è¡¨é€‚åˆ<strong>é¢‘ç¹å¢åˆ </strong>çš„åœºæ™¯.</li>
</ul>
<p>é“¾è¡¨ä¸æ•°ç»„å„æœ‰ä¼˜ç‚¹å’Œç¼ºç‚¹,è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç³»ç»Ÿè®¾è®¡çš„ä¸€ä¸ªç‰¹ç‚¹ : æ²¡æœ‰å®Œç¾çš„æ–¹æ¡ˆ,æœ‰çš„åªæ˜¯æ ¹æ®ä¸šåŠ¡åœºæ™¯åšå‡ºå–èˆ,è¦ä¹ˆç©ºé—´æ¢æ—¶é—´,è¦ä¹ˆç‰ºç‰²æ•ˆç‡æ¥æé«˜å®‰å…¨æ€§.</p>
<h2 id=æ•°æ®ç»“æ„>æ•°æ®ç»“æ„</h2>
<p>å°±æ˜¯ä¸€ä¸ªåå«elementDataçš„æ•°ç»„,é»˜è®¤çš„åˆå§‹é•¿åº¦æ˜¯10;</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java> <span style=color:#66d9ef>transient</span> Object<span style=color:#f92672>[]</span> elementData<span style=color:#f92672>;</span> <span style=color:#75715e>// non-private to simplify nested class access
</span><span style=color:#75715e></span>
 <span style=color:#75715e>/**
</span><span style=color:#75715e>  * Default initial capacity.
</span><span style=color:#75715e>  */</span>
 <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> DEFAULT_CAPACITY <span style=color:#f92672>=</span> 10<span style=color:#f92672>;</span>
</code></pre></div><h2 id=åˆå§‹åŒ–>åˆå§‹åŒ–</h2>
<p>ArrayListæœ‰ä¸‰ä¸ªæ„é€ æ–¹æ³•:</p>
<p><strong>æ— å‚</strong>æ—¶è®¾ç½®ä¸ºç©ºæ•°ç»„,<strong>ç›´åˆ°ç¬¬ä¸€æ¬¡å¾€listé‡Œé¢addæ•°æ®æ‰ä¼šåˆå§‹åŒ–ä¸ºé•¿åº¦ä¸º10çš„æ•°ç»„</strong>.è¿™é‡Œçš„ç›¸å…³é€»è¾‘æœ‰å‡ å±‚è°ƒç”¨é“¾,åé¢æ‰©å®¹çš„æ—¶å€™å†è¯¦ç»†å±•å¼€</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ArrayList</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>elementData</span> <span style=color:#f92672>=</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span style=color:#f92672>;</span><span style=color:#75715e>//è®¾ç½®æˆç©ºæ•°ç»„
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>

<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Object<span style=color:#f92672>[]</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA <span style=color:#f92672>=</span> <span style=color:#f92672>{};</span>
</code></pre></div><p><strong>å‚æ•°ä¸ºé›†åˆ</strong>æ—¶å°†å…¶<strong>è½¬åŒ–ä¸ºæ•°ç»„</strong>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ArrayList</span><span style=color:#f92672>(</span>Collection<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> E<span style=color:#f92672>&gt;</span> c<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        elementData <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>toArray</span><span style=color:#f92672>();</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>size <span style=color:#f92672>=</span> elementData<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>)</span> <span style=color:#f92672>!=</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#75715e>// defend against c.toArray (incorrectly) not returning Object[]
</span><span style=color:#75715e></span>            <span style=color:#75715e>// (see e.g. https://bugs.openjdk.java.net/browse/JDK-6260652)
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>elementData<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>()</span> <span style=color:#f92672>!=</span> Object<span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
                elementData <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>copyOf</span><span style=color:#f92672>(</span>elementData<span style=color:#f92672>,</span> size<span style=color:#f92672>,</span> Object<span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
            <span style=color:#75715e>// replace with empty array.
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>elementData</span> <span style=color:#f92672>=</span> EMPTY_ELEMENTDATA<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>å½“å‚æ•°ä¸ºä¸€ä¸ªæ•´å‹,ä¹Ÿå°±æ˜¯<strong>æŒ‡å®šæ•°ç»„é•¿åº¦</strong>æ—¶,æ–°å»ºä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„æ•°ç»„</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ArrayList</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> initialCapacity<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>initialCapacity <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>elementData</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[</span>initialCapacity<span style=color:#f92672>];</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>initialCapacity <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>elementData</span> <span style=color:#f92672>=</span> EMPTY_ELEMENTDATA<span style=color:#f92672>;</span><span style=color:#75715e>//å½“ä¼ å…¥çš„æ˜¯0,å¤„ç†æ–¹æ³•å’Œæ— å‚æ„é€ çš„ä¸€è‡´
</span><span style=color:#75715e></span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> IllegalArgumentException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Illegal Capacity: &#34;</span><span style=color:#f92672>+</span>
                                               initialCapacity<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><h2 id=add>Add</h2>
<p>ç”±äºlistçš„get,setéƒ½å¤ªç®€å•,è¿™é‡Œå°±ç›´æ¥è·³è¿‡æ¥åˆ†æaddäº†.å’Œmapä¸€æ ·,addä¹Ÿå¯èƒ½è§¦å‘æ‰©å®¹.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>,</span> Object<span style=color:#f92672>[]</span> elementData<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>s <span style=color:#f92672>==</span> elementData<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>)</span><span style=color:#75715e>//æ‰©å®¹æ¡ä»¶,å½“æ•°ç»„æ»¡äº†çš„æ—¶å€™è¿›è¡Œæ‰©å®¹
</span><span style=color:#75715e></span>            elementData <span style=color:#f92672>=</span> grow<span style=color:#f92672>();</span>
        elementData<span style=color:#f92672>[</span>s<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> e<span style=color:#f92672>;</span>
        size <span style=color:#f92672>=</span> s <span style=color:#f92672>+</span> 1<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        modCount<span style=color:#f92672>++;</span>
        add<span style=color:#f92672>(</span>e<span style=color:#f92672>,</span> elementData<span style=color:#f92672>,</span> size<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index<span style=color:#f92672>,</span> E element<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        rangeCheckForAdd<span style=color:#f92672>(</span>index<span style=color:#f92672>);</span>
        modCount<span style=color:#f92672>++;</span>
        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> s<span style=color:#f92672>;</span>
        Object<span style=color:#f92672>[]</span> elementData<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>s <span style=color:#f92672>=</span> size<span style=color:#f92672>)</span> <span style=color:#f92672>==</span> <span style=color:#f92672>(</span>elementData <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>elementData</span><span style=color:#f92672>).</span><span style=color:#a6e22e>length</span><span style=color:#f92672>)</span><span style=color:#75715e>//ä¹Ÿæ˜¯æ»¡äº†å°±æ‰©å®¹
</span><span style=color:#75715e></span>            elementData <span style=color:#f92672>=</span> grow<span style=color:#f92672>();</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>arraycopy</span><span style=color:#f92672>(</span>elementData<span style=color:#f92672>,</span> index<span style=color:#f92672>,</span>
                         elementData<span style=color:#f92672>,</span> index <span style=color:#f92672>+</span> 1<span style=color:#f92672>,</span>
                         s <span style=color:#f92672>-</span> index<span style=color:#f92672>);</span><span style=color:#75715e>//å¦‚æœåœ¨æ•°ç»„ä¸­é—´æ’å…¥å…ƒç´ ,é‚£ä¹ˆå°±å¾—å¤åˆ¶ä¸€ä¸ªæ–°çš„æ•°ç»„äº†
</span><span style=color:#75715e></span>        elementData<span style=color:#f92672>[</span>index<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> element<span style=color:#f92672>;</span>
        size <span style=color:#f92672>=</span> s <span style=color:#f92672>+</span> 1<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><ul>
<li>addä¹‹å‰ä¼š<strong>æ£€æŸ¥æ•°ç»„å½“å‰çš„å®¹é‡</strong>,çœ‹çœ‹éœ€ä¸éœ€è¦æ‰©å®¹.</li>
<li>ç”±äºlistä¸åƒmapé‚£æ ·å¤æ‚,ä¸€ä¸ªä½ç½®åªæœ‰ä¸€ä¸ªå…ƒç´ ,æ‰€ä»¥æ‰©å®¹æ¡ä»¶åªæœ‰ä¸€ä¸ª: <strong>æ•°ç»„å·²æ»¡</strong></li>
<li>ç”±äºæ•°ç»„æ˜¯è¿ç»­çš„,å¦‚æœæ˜¯<strong>åœ¨æŒ‡å®šä½ç½®æ’å…¥</strong>,é‚£ä¹ˆå°±éœ€è¦<strong>å¤åˆ¶ä¸€ä¸ªæ–°çš„æ•°ç»„</strong>æ¥æ“ä½œäº†.</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´,å¦‚æœæ•°ç»„å·²æ»¡,ä¸”ä½ åˆè¦å†æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªæ•°æ®,é‚£ä¹ˆæ•°ç»„å°†è¢«<strong>å¤åˆ¶ä¸¤æ¬¡</strong>.</p>
<h3 id=ä¸€ä¸ªå°å‘>ä¸€ä¸ªå°å‘</h3>
<p>æ¥çœ‹ä¸€æ®µä»£ç </p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>  ArrayList<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> list<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;(</span>10<span style=color:#f92672>);</span>
  list<span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span>5<span style=color:#f92672>,</span>4<span style=color:#f92672>);</span>
</code></pre></div><p>è¿™æ®µä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œå—?</p>
<p>å¯èƒ½æœ‰äººä¼šè¯´listçš„å¤§å°æ˜¯10,é‚£æˆ‘10ä»¥å†…æ¯”å¦‚å¾€5çš„ä½ç½®setä¸ªå€¼åº”è¯¥æ²¡é—®é¢˜å§.</p>
<p>å®é™…ä¸Šä¼šæŠ¥ä¸€ä¸ª<strong>æ•°ç»„è¶Šç•Œ</strong>çš„å¼‚å¸¸.</p>
<p>ä¸è¿‡è¿™å¹¶ä¸ç®—çœŸæ­£çš„è¶Šç•Œ,æˆ‘ä»¬çš„æ•°ç»„é•¿åº¦è¿˜æ˜¯10.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> E <span style=color:#a6e22e>set</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index<span style=color:#f92672>,</span> E element<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>checkIndex</span><span style=color:#f92672>(</span>index<span style=color:#f92672>,</span> size<span style=color:#f92672>);</span><span style=color:#75715e>//è¾¹ç•Œé€‰ç”¨çš„æ˜¯sizeè€Œä¸æ˜¯length
</span><span style=color:#75715e></span>        E oldValue <span style=color:#f92672>=</span> elementData<span style=color:#f92672>(</span>index<span style=color:#f92672>);</span>
        elementData<span style=color:#f92672>[</span>index<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> element<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>return</span> oldValue<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@HotSpotIntrinsicCandidate</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#f92672>&lt;</span>X <span style=color:#66d9ef>extends</span> RuntimeException<span style=color:#f92672>&gt;</span>
    <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>checkIndex</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> length<span style=color:#f92672>,</span>
                   BiFunction<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;,</span> X<span style=color:#f92672>&gt;</span> oobef<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>index <span style=color:#f92672>&lt;</span> 0 <span style=color:#f92672>||</span> index <span style=color:#f92672>&gt;=</span> length<span style=color:#f92672>)</span>
            <span style=color:#66d9ef>throw</span> outOfBoundsCheckIndex<span style=color:#f92672>(</span>oobef<span style=color:#f92672>,</span> index<span style=color:#f92672>,</span> length<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> index<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>ç”±äºlisté‡Œé¢åˆ¤æ–­è¾¹ç•Œç”¨çš„æ˜¯<strong>size</strong>(å®é™…èŠ‚ç‚¹ä¸ªæ•°),è€Œä¸æ˜¯length(æ•°ç»„é•¿åº¦),æ‰€ä»¥è¿™ç§æƒ…å†µä¼šæŠ¥ä¸€ä¸ª"è¶Šç•Œ".</p>
<p>è¿™ç§å†™æ³•å®é™…ä¸Šæ˜¯æŠŠlistå½“æˆæ•°ç»„æ¥ç”¨äº†.</p>
<p>å®˜æ–¹è®¤ä¸ºè™½ç„¶elementDataæ˜¯listçš„å®ç°ç»†èŠ‚,ä½†æ˜¯å®ƒ<strong>å¯¹å¤–ç•Œæ˜¯éšè—</strong>çš„,åªèƒ½æ“ä½œé€»è¾‘ä¸Šçš„listè€Œä¸æ˜¯å®é™…å­˜åœ¨çš„elementData.</p>
<p><strong>å°è£…çš„ä¸€å¤§æ„ä¹‰,å°±æ˜¯å‘ç”¨æˆ·å±è”½ç”¨æˆ·ä¸éœ€è¦çš„æ“ä½œ.å¦åˆ™,ç”¨æˆ·å¯èƒ½ä¼šæœ‰æ„æ— æ„åœ°è°ƒç”¨è¿™äº›æ“ä½œ,è¿™å°†æˆä¸ºè½¯ä»¶å·¥ç¨‹ä¸­é‡è¦çš„bugæ¥æº.</strong></p>
<p>å¦‚æœlisté‡Œé¢è¿˜æ²¡æœ‰å…ƒç´ ,é‚£ä¹ˆä½ åªèƒ½add,ä¸èƒ½get,set.</p>
<p>å¦‚æœlistçš„sizeæ˜¯5,é‚£ä¹ˆä½ å°±ä¸èƒ½è®¿é—®ç¬¬äº”ä¸ªå…ƒç´ ä¹‹åçš„ä½ç½®.</p>
<p>listçš„addè¿˜æ²¡èµ°åˆ°åé¢çš„ä½ç½®,ä½ å°±ä¸èƒ½æå‰å»putæˆ–è€…set.</p>
<h2 id=æ‰©å®¹>æ‰©å®¹</h2>
<p>åœ¨listé‡Œé¢,æ‰©å®¹çš„å‡½æ•°æ˜¯grow().</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> Object<span style=color:#f92672>[]</span> <span style=color:#a6e22e>grow</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> minCapacity<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> elementData <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>copyOf</span><span style=color:#f92672>(</span>elementData<span style=color:#f92672>,</span>
                                           newCapacity<span style=color:#f92672>(</span>minCapacity<span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> Object<span style=color:#f92672>[]</span> <span style=color:#a6e22e>grow</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> grow<span style=color:#f92672>(</span>size <span style=color:#f92672>+</span> 1<span style=color:#f92672>);</span><span style=color:#75715e>//æ‰©å®¹åæ•°ç»„é•¿åº¦æœ€å°‘+1
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</code></pre></div><p>è¿™é‡Œè°ƒç”¨äº†Arrays.copyOf(),è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯<strong>å°†æ—§æ•°ç»„çš„å†…å®¹å¤åˆ¶åˆ°æ–°çš„æ•°ç»„,æ–°æ•°ç»„å¤šå‡ºæ¥çš„éƒ¨åˆ†ç½®ä¸ºnull</strong>.</p>
<p>é‡Œé¢æ˜¯ä¸ªnativeæ–¹æ³•,æºç å°±ä¸è´´äº†.</p>
<p>è¿™é‡Œè¿˜è°ƒç”¨äº†newCapacity(),è¿™ä¸ªæ–¹æ³•ç”¨äº<strong>åˆ¤æ–­æ–°æ•°ç»„çš„é•¿åº¦</strong>.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>newCapacity</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> minCapacity<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// overflow-conscious code
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>int</span> oldCapacity <span style=color:#f92672>=</span> elementData<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span>
        <span style=color:#66d9ef>int</span> newCapacity <span style=color:#f92672>=</span> oldCapacity <span style=color:#f92672>+</span> <span style=color:#f92672>(</span>oldCapacity <span style=color:#f92672>&gt;&gt;</span> 1<span style=color:#f92672>);</span><span style=color:#75715e>//æ–°æ•°ç»„é•¿åº¦ä¸ºåŸæ¥çš„1.5å€,å‘ä¸‹å–æ•´
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>newCapacity <span style=color:#f92672>-</span> minCapacity <span style=color:#f92672>&lt;=</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>elementData <span style=color:#f92672>==</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span style=color:#f92672>)</span><span style=color:#75715e>//åˆå§‹åŒ–,æ•°ç»„ä¸ºç©º,åˆ™é•¿åº¦è®¾ä¸º10
</span><span style=color:#75715e></span>                <span style=color:#66d9ef>return</span> Math<span style=color:#f92672>.</span><span style=color:#a6e22e>max</span><span style=color:#f92672>(</span>DEFAULT_CAPACITY<span style=color:#f92672>,</span> minCapacity<span style=color:#f92672>);</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>minCapacity <span style=color:#f92672>&lt;</span> 0<span style=color:#f92672>)</span> <span style=color:#75715e>// overflow
</span><span style=color:#75715e></span>                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> OutOfMemoryError<span style=color:#f92672>();</span>
            <span style=color:#66d9ef>return</span> minCapacity<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
        <span style=color:#66d9ef>return</span> <span style=color:#f92672>(</span>newCapacity <span style=color:#f92672>-</span> MAX_ARRAY_SIZE <span style=color:#f92672>&lt;=</span> 0<span style=color:#f92672>)</span>
            <span style=color:#f92672>?</span> newCapacity
            <span style=color:#f92672>:</span> hugeCapacity<span style=color:#f92672>(</span>minCapacity<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>è¿™é‡Œå…³é”®çš„ä¸¤æ¡è¡¨è¾¾å¼:</p>
<ul>
<li>newCapacity = oldCapacity + (oldCapacity &#187; 1)</li>
<li>if (newCapacity - minCapacity &lt;= 0)</li>
</ul>
<p>ä»€ä¹ˆæƒ…å†µä¸‹ç¬¬äºŒæ¡è¡¨è¾¾å¼ä¸ºtrueå‘¢?</p>
<ul>
<li>å½“oldCapacity=0,minCapacity=0+1=1,newCapacity=0+0=0,é‚£ä¹ˆnewCapacity - minCapacity=-1 &lt; 0.è¿™å¯¹åº”çš„æ˜¯<strong>æ•°ç»„ä¸ºç©º</strong>çš„æƒ…å†µ,ä¹Ÿå°±æ˜¯ä¸Šé¢æˆ‘ä»¬è¯´çš„æ— å‚æ„é€ æ–¹æ³•ä¼šèµ°åˆ°è¿™æ¡é€»è¾‘,<strong>å°†æ•°ç»„åˆå§‹åŒ–é•¿åº¦ä¸º10</strong>.</li>
<li>å½“0&lt;oldCapacity&lt;4æ—¶,newCapacity - minCapacityä¾ç„¶å°äº0,è¿™ç§æƒ…å†µæ‰©å®¹å<strong>æ•°ç»„é•¿åº¦+1</strong>.</li>
<li>å…¶ä½™æƒ…å†µnewCapacity - minCapacity>0,æ­¤æ—¶æ–°æ•°ç»„é•¿åº¦=newCapacity,ä¹Ÿå°±æ˜¯åŸæ¥çš„<strong>1.5å€</strong>(å‘ä¸‹å–æ•´)</li>
</ul>
<p>çœ‹åˆ°è¿™é‡Œ,ä¹Ÿè®¸ä½ ä¼šé»˜é»˜æ€»ç»“ :</p>
<p><strong>å“¦,åŸæ¥æ‰©å®¹å,é™¤äº†åˆå§‹åŒ–å¤–,æ•°ç»„çš„é•¿åº¦æœ‰ä¸¤ç§æƒ…å†µ,ä¸€ç§æ˜¯+1,ä¸€ç§æ˜¯+50%</strong></p>
<p>å…¶å®å½“åŸé•¿åº¦=2æˆ–3æ—¶,æ‰©å®¹åå®ƒä»¬è™½ç„¶ä¹Ÿæ˜¯é•¿åº¦+1,ä½†æ˜¯1ä¹Ÿæ˜¯2å’Œ3çš„50%(å‘ä¸‹å–æ•´).</p>
<p>æ‰€ä»¥çœ‹åˆ°æ²¡æœ‰,å¦‚æœè®©æˆ‘ä»¬æ¥å†™è¿™æ®µé€»è¾‘,å¯èƒ½æˆ‘ä»¬çš„æ€è·¯æ˜¯è¿™æ ·:</p>
<ul>
<li>
<p>if æ•°ç»„é•¿åº¦=0, then&mldr;.</p>
</li>
<li>
<p>if æ•°ç»„é•¿åº¦=1, then&mldr;</p>
</li>
</ul>
<p>è€ŒJDKçš„å¤§ç¥ä»¬ç”¨ä¸€ä¸¤æ¡è¡¨è¾¾å¼å°±æŠŠå„ç§æƒ…å†µæ¸…æ¸…æ¥šæ¥šåœ°åˆ†éš”å¼€äº†.ä¸ç¦è†œæ‹œ&mldr;&mldr;</p>
<h3 id=ç¼©å®¹>ç¼©å®¹</h3>
<p>ArrayList<strong>æ²¡æœ‰è‡ªåŠ¨ç¼©å®¹</strong>çš„æœºåˆ¶,ä¸è¿‡å®ƒæä¾›äº†ä¸€ä¸ªæ–¹æ³•æŠŠlistçš„<strong>å®¹é‡æœ€å°åŒ–</strong>(åˆšå¥½è£…å¾—ä¸‹æ‰€æœ‰å…ƒç´ )</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>trimToSize</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        modCount<span style=color:#f92672>++;</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>&lt;</span> elementData<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            elementData <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span>
              <span style=color:#f92672>?</span> EMPTY_ELEMENTDATA
              <span style=color:#f92672>:</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>copyOf</span><span style=color:#f92672>(</span>elementData<span style=color:#f92672>,</span> size<span style=color:#f92672>);</span><span style=color:#75715e>//åŒæ ·æ˜¯å¤åˆ¶
</span><span style=color:#75715e></span>        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><h2 id=remove>Remove</h2>
<p><img loading=lazy src=https://tvax2.sinaimg.cn/large/006P3Jr6gy1h3qkbruuqoj30fe056wf4.jpg alt=remove>
</p>
<p>å’Œaddä¸€æ ·,removeä¸€æ ·éœ€è¦é€šè¿‡å¤åˆ¶æ•°ç»„æ¥è¿›è¡Œ.</p>
<p>ä½†æœ‰ä¸€ç‚¹ä¸ä¸€æ ·,addä¸æŒ‡å®šä½ç½®æ—¶,é»˜è®¤æ’å…¥åˆ°æœ«å°¾,æ­¤æ—¶ä¸éœ€è¦å¤åˆ¶.</p>
<p>è€Œremoveä¸æŒ‡å®šä½ç½®æ—¶,é»˜è®¤ä»å¤´å¼€å§‹æ‰¾,ç„¶å<strong>åˆ é™¤æ‰¾åˆ°çš„ä¸€ä¸ªå…ƒç´ </strong>.é‚£ä¹ˆåˆ é™¤çš„å…ƒç´ ä½ç½®ä¸ç¡®å®š,æ‰€ä»¥éƒ½å½“æˆåˆ é™¤ä¸­é—´çš„èŠ‚ç‚¹æ¥å¤„ç†,å› æ­¤<strong>ä¸è®ºå“ªç§æƒ…å†µéƒ½éœ€è¦å¤åˆ¶æ•°ç»„.</strong></p>
<p>ä¹Ÿè®¸æœ‰äººä¼šå»ºè®®ä½œè€…<strong>æ‰¾åˆ°å¯¹åº”å…ƒç´ ååˆ¤æ–­ä¸€ä¸‹æ˜¯å¦æœ«å°¾å…ƒç´ ,å¦‚æœæ˜¯ç›´æ¥ç½®nullä¸å°±èŠ‚çœäº†ä¸€æ¬¡å¤åˆ¶çš„æ“ä½œäº†</strong>?</p>
<p>æˆ‘ä»¥ä¸º,åœ¨å®é™…æƒ…å†µä¸­,è¦åˆ é™¤çš„<strong>èŠ‚ç‚¹æ°å¥½ä½äºæœ«å°¾æ˜¯å°æ¦‚ç‡äº‹ä»¶</strong>,ä¸ºäº†è¿™å°æ¦‚ç‡äº‹ä»¶è€Œæ¯æ¬¡éƒ½é¢å¤–åˆ¤æ–­ä¸€æ¬¡ææ€•åˆ’ä¸æ¥.</p>
<p>åˆ é™¤æŒ‡å®šä½ç½®:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> E <span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>checkIndex</span><span style=color:#f92672>(</span>index<span style=color:#f92672>,</span> size<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>final</span> Object<span style=color:#f92672>[]</span> es <span style=color:#f92672>=</span> elementData<span style=color:#f92672>;</span>

        <span style=color:#a6e22e>@SuppressWarnings</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;unchecked&#34;</span><span style=color:#f92672>)</span> E oldValue <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>E<span style=color:#f92672>)</span> es<span style=color:#f92672>[</span>index<span style=color:#f92672>];</span>
        fastRemove<span style=color:#f92672>(</span>es<span style=color:#f92672>,</span> index<span style=color:#f92672>);</span>

        <span style=color:#66d9ef>return</span> oldValue<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>æ ¹æ®**equals()**åˆ é™¤æŒ‡å®šå…ƒç´ </p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span>Object o<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>final</span> Object<span style=color:#f92672>[]</span> es <span style=color:#f92672>=</span> elementData<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> size <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>;</span>
        <span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
        found<span style=color:#f92672>:</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>o <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(;</span> i <span style=color:#f92672>&lt;</span> size<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>es<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span><span style=color:#75715e>//nullä¹Ÿå¯ä»¥åˆ ,éƒ½æ˜¯åˆ é™¤æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ª
</span><span style=color:#75715e></span>                        <span style=color:#66d9ef>break</span> found<span style=color:#f92672>;</span>
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(;</span> i <span style=color:#f92672>&lt;</span> size<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>o<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>es<span style=color:#f92672>[</span>i<span style=color:#f92672>]))</span>
                        <span style=color:#66d9ef>break</span> found<span style=color:#f92672>;</span>
            <span style=color:#f92672>}</span>
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
        fastRemove<span style=color:#f92672>(</span>es<span style=color:#f92672>,</span> i<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>fastRemove</span><span style=color:#f92672>(</span>Object<span style=color:#f92672>[]</span> es<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> i<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        modCount<span style=color:#f92672>++;</span>
        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> newSize<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>newSize <span style=color:#f92672>=</span> size <span style=color:#f92672>-</span> 1<span style=color:#f92672>)</span> <span style=color:#f92672>&gt;</span> i<span style=color:#f92672>)</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>arraycopy</span><span style=color:#f92672>(</span>es<span style=color:#f92672>,</span> i <span style=color:#f92672>+</span> 1<span style=color:#f92672>,</span> es<span style=color:#f92672>,</span> i<span style=color:#f92672>,</span> newSize <span style=color:#f92672>-</span> i<span style=color:#f92672>);</span><span style=color:#75715e>//å¤åˆ¶åˆ°æ–°æ•°ç»„
</span><span style=color:#75715e></span>        es<span style=color:#f92672>[</span>size <span style=color:#f92672>=</span> newSize<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span><span style=color:#75715e>//æœ€åä¸€ä¸ªä½ç½®è®¾ä¸ºnull
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</code></pre></div><p>ç®€å•æ¦‚æ‹¬ä¸‹æµç¨‹:</p>
<ul>
<li>å…ˆéå†å»æŸ¥æ‰¾å…ƒç´ ,å…ƒç´ æ˜¯nullåˆ™æ‰¾null,å…ƒç´ énullåˆ™è°ƒç”¨equals()æ¥æ¯”è¾ƒ.</li>
<li>åˆ é™¤æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ ,ç„¶åå‰©ä½™å…ƒç´ å¤åˆ¶åˆ°æ–°çš„æ•°ç»„.</li>
<li>æ–°æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®è®¾ä¸ºnull</li>
</ul>
<h2 id=æ·±å…‹éš†æµ…å…‹éš†>æ·±å…‹éš†/æµ…å…‹éš†</h2>
<p>è¿™ä¸ªåœ¨Hashmapé‚£ç¯‡æ–‡ç« å¿˜äº†è®²,åœ¨è¿™é‡Œè¡¥å›æ¥.</p>
<p>å…ˆçœ‹ä¸‹å®šä¹‰:</p>
<p><strong>æµ…å…‹éš†</strong></p>
<pre tabindex=0><code>è¢«å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡éƒ½å«æœ‰ä¸åŸæ¥çš„å¯¹è±¡ç›¸åŒçš„å€¼ï¼Œè€Œæ‰€æœ‰çš„å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ã€‚æ¢è¨€ä¹‹ï¼Œæµ…å¤åˆ¶ä»…ä»…å¤åˆ¶æ‰€æ‹·è´çš„å¯¹è±¡ï¼Œè€Œä¸å¤åˆ¶å®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡ã€‚
</code></pre><p><strong>æ·±å…‹éš†</strong></p>
<pre tabindex=0><code>è¢«å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡éƒ½å«æœ‰ä¸åŸæ¥çš„å¯¹è±¡ç›¸åŒçš„å€¼ï¼Œé™¤å»é‚£äº›å¼•ç”¨å…¶ä»–å¯¹è±¡çš„å˜é‡ã€‚é‚£äº›å¼•ç”¨å…¶ä»–å¯¹è±¡çš„å˜é‡å°†æŒ‡å‘è¢«å¤åˆ¶è¿‡çš„æ–°å¯¹è±¡ï¼Œè€Œä¸å†æ˜¯åŸæœ‰çš„é‚£äº›è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚æ¢è¨€ä¹‹ï¼Œæ·±å¤åˆ¶æŠŠè¦å¤åˆ¶çš„å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡éƒ½å¤åˆ¶äº†ä¸€éã€‚
</code></pre><p>å…¶å®å®ƒä»¬çš„åŒºåˆ«ä¹Ÿå°±æ˜¯<strong>å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’</strong>çš„åŒºåˆ«.</p>
<p>æµ…å…‹éš†=å¼•ç”¨ä¼ é€’ æ·±å…‹éš†=å€¼ä¼ é€’</p>
<p>åœ¨æˆ‘å°è±¡ä¸­,JDKå¥½åƒæ²¡æœ‰å‡ ä¸ªç±»æ˜¯å®ç°æ·±å…‹éš†çš„,æ‰€ä»¥å¦‚æœä¸æƒ³å¤åˆ¶åçš„æ–°å¯¹è±¡ä¸æ—§å¯¹è±¡ç›¸äº’å¹²æ‰°,åœ¨å¤åˆ¶ä¹‹å‰è¦é‡å†™clone()æ–¹æ³•.</p>
<p><strong>ArrayListçš„å…‹éš†æ–¹æ³•</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Returns a shallow copy of this {@code ArrayList} instance.  (The
</span><span style=color:#75715e>     * elements themselves are not copied.)
</span><span style=color:#75715e>     *
</span><span style=color:#75715e>     * @return a clone of this {@code ArrayList} instance
</span><span style=color:#75715e>     */</span>    
	<span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>clone</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
            ArrayList<span style=color:#f92672>&lt;?&gt;</span> v <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ArrayList<span style=color:#f92672>&lt;?&gt;)</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>clone</span><span style=color:#f92672>();</span>
            v<span style=color:#f92672>.</span><span style=color:#a6e22e>elementData</span> <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>copyOf</span><span style=color:#f92672>(</span>elementData<span style=color:#f92672>,</span> size<span style=color:#f92672>);</span>
            v<span style=color:#f92672>.</span><span style=color:#a6e22e>modCount</span> <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>return</span> v<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>CloneNotSupportedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#75715e>// this shouldn&#39;t happen, since we are Cloneable
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> InternalError<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>æ³¨é‡Šå†™çš„å¾ˆæ˜ç™½äº†,æ˜¯<strong>æµ…å¤åˆ¶(shallow copy)</strong>.é™¤äº†modCountç½®0ä¹‹å¤–,æ•°ç»„ä¹Ÿæ˜¯ç›´æ¥å¤åˆ¶è¿‡å»çš„.</p>
<p>å¦‚æœæ”¹æˆæ·±å…‹éš†çš„è¯,åº”è¯¥è¦éå†æ•°ç»„,ä¾æ¬¡è°ƒç”¨æ¯ä¸ªå…ƒç´ çš„cloneæ–¹æ³•è€Œä¸æ˜¯ç›´æ¥å¤åˆ¶.(è¦æ³¨æ„å¥—å¨ƒçš„æƒ…å†µ)</p>
<h1 id=linkedlist>LinkedList</h1>
<h2 id=æ•°æ®ç»“æ„-1>æ•°æ®ç»“æ„</h2>
<p>LinkedListæœ‰ä¸€ä¸ªå†…éƒ¨ç±»Node,è¿™å°±æ˜¯å­˜å–æ•°æ®çš„ç»“æ„äº†.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Node</span><span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
        E item<span style=color:#f92672>;</span>
        Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> next<span style=color:#f92672>;</span>
        Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> prev<span style=color:#f92672>;</span>

        Node<span style=color:#f92672>(</span>Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> prev<span style=color:#f92672>,</span> E element<span style=color:#f92672>,</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> next<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>item</span> <span style=color:#f92672>=</span> element<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> next<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span> <span style=color:#f92672>=</span> prev<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>å¾ˆå…¸å‹çš„åŒå‘é“¾è¡¨äº†.</p>
<p>æ­¤å¤–LinkedListå†…éƒ¨ä¹ŸæŒæœ‰<strong>å¤´å°¾åŒæŒ‡é’ˆ</strong>.</p>
<p>ç”±äºé“¾è¡¨ä¸å­˜åœ¨æ‰©å®¹çš„æ¦‚å¿µ,å› æ­¤sizeæ˜¯é“¾è¡¨çš„é•¿åº¦ä¹Ÿæ˜¯å®é™…å…ƒç´ çš„ä¸ªæ•°.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>transient</span> <span style=color:#66d9ef>int</span> size <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Pointer to first node.
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>transient</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> first<span style=color:#f92672>;</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Pointer to last node.
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>transient</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> last<span style=color:#f92672>;</span>
</code></pre></div><h2 id=åˆå§‹åŒ–-1>åˆå§‹åŒ–</h2>
<p>æ¥çœ‹ä¸€ä¸‹æ„é€ å‡½æ•°</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>LinkedList</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>LinkedList</span><span style=color:#f92672>(</span>Collection<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> E<span style=color:#f92672>&gt;</span> c<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>();</span>
        addAll<span style=color:#f92672>(</span>c<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>ç©ºçš„.</p>
<p>æ²¡é”™æ˜¯ç©ºçš„,å®ƒä¸éœ€è¦åƒArrayListå…ˆæ„é€ å‡ºä¸€ä¸ªæ•°ç»„é‚£æ ·ç°å»æ„é€ å‡ºfirstèŠ‚ç‚¹.</p>
<p>firstæ˜¯nullçš„å°±è®©å®ƒæš‚æ—¶nullå§,ç­‰åˆ°addç¬¬ä¸€ä¸ªå…ƒç´ å†å»æ„é€ .</p>
<h2 id=add-1>Add</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span><span style=color:#75715e>//æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹,é»˜è®¤æ’å…¥é“¾å°¾
</span><span style=color:#75715e></span>        linkLast<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index<span style=color:#f92672>,</span> E element<span style=color:#f92672>)</span> <span style=color:#f92672>{</span><span style=color:#75715e>//å¾€ç‰¹å®šä½ç½®æ’å…¥
</span><span style=color:#75715e></span>        checkPositionIndex<span style=color:#f92672>(</span>index<span style=color:#f92672>);</span>

        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>index <span style=color:#f92672>==</span> size<span style=color:#f92672>)</span>
            linkLast<span style=color:#f92672>(</span>element<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>else</span>
            linkBefore<span style=color:#f92672>(</span>element<span style=color:#f92672>,</span> node<span style=color:#f92672>(</span>index<span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>addFirst</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span><span style=color:#75715e>//å¾€å¤´éƒ¨æ’å…¥
</span><span style=color:#75715e></span>        linkFirst<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>addLast</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>å¾€å°¾éƒ¨æ’å…¥
        <span style=color:#a6e22e>linkLast</span><span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°LinkedListæ”¯æŒ<strong>å¾€ä»»æ„ä½ç½®æ’å…¥å…ƒç´ </strong>.</p>
<p><img loading=lazy src=https://tva3.sinaimg.cn/large/006P3Jr6gy1h3qkcp0nxfj30sr09yq56.jpg alt="insert for LinkedList">
</p>
<p>æ ¹æ®linkFirst,linkBefore,linkLast,æ’å…¥å¯åˆ†ä¸º3ç§æƒ…å†µ:</p>
<ul>
<li>æ’å…¥å¤´éƒ¨</li>
<li>æ’å…¥åˆ°æŸå…ƒç´ å‰é¢</li>
<li>æ’å…¥å°¾éƒ¨</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>linkFirst</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> f <span style=color:#f92672>=</span> first<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> newNode <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Node<span style=color:#f92672>&lt;&gt;(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>,</span> e<span style=color:#f92672>,</span> f<span style=color:#f92672>);</span><span style=color:#75715e>//å°ç»†èŠ‚,è¿™é‡Œæ˜¯æ–°å»ºä¸€ä¸ªnodeè€Œä¸æ˜¯ç›´æ¥èµ‹å€¼
</span><span style=color:#75715e></span>        first <span style=color:#f92672>=</span> newNode<span style=color:#f92672>;</span><span style=color:#75715e>//newèŠ‚ç‚¹å˜ä¸ºfirstèŠ‚ç‚¹
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>f <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span><span style=color:#75715e>//é“¾è¡¨æ˜¯ç©ºçš„,é‚£ä¹ˆfirstèŠ‚ç‚¹å’ŒlastèŠ‚ç‚¹éƒ½åŒæ—¶ä¸ºnewèŠ‚ç‚¹
</span><span style=color:#75715e></span>            last <span style=color:#f92672>=</span> newNode<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>else</span>
            f<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span> <span style=color:#f92672>=</span> newNode<span style=color:#f92672>;</span><span style=color:#75715e>//åŸfirstèŠ‚ç‚¹çš„å‰é©±å˜ä¸ºnewèŠ‚ç‚¹
</span><span style=color:#75715e></span>        size<span style=color:#f92672>++;</span>
        modCount<span style=color:#f92672>++;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>linkBefore</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>,</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> succ<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// assert succ != null;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> pred <span style=color:#f92672>=</span> succ<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span><span style=color:#f92672>;</span><span style=color:#75715e>//è®°å½•è¯¥èŠ‚ç‚¹çš„å‰é©±
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> newNode <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Node<span style=color:#f92672>&lt;&gt;(</span>pred<span style=color:#f92672>,</span> e<span style=color:#f92672>,</span> succ<span style=color:#f92672>);</span>
        succ<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span> <span style=color:#f92672>=</span> newNode<span style=color:#f92672>;</span><span style=color:#75715e>//è¯¥èŠ‚ç‚¹çš„å‰é©±ä¸ºnewèŠ‚ç‚¹
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>pred <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span><span style=color:#75715e>//è¯¥èŠ‚ç‚¹çš„å‰é©±ä¸ºnull,ä¹Ÿå°±æ˜¯è¯¥èŠ‚ç‚¹ä¸ºfirstèŠ‚ç‚¹
</span><span style=color:#75715e></span>            first <span style=color:#f92672>=</span> newNode<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>else</span>
            pred<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> newNode<span style=color:#f92672>;</span><span style=color:#75715e>//å‰é©±çš„nextæŒ‡å‘æ–°èŠ‚ç‚¹
</span><span style=color:#75715e></span>        size<span style=color:#f92672>++;</span>
        modCount<span style=color:#f92672>++;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>linkLast</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> l <span style=color:#f92672>=</span> last<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> newNode <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Node<span style=color:#f92672>&lt;&gt;(</span>l<span style=color:#f92672>,</span> e<span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
        last <span style=color:#f92672>=</span> newNode<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span>
            first <span style=color:#f92672>=</span> newNode<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>else</span>
            l<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> newNode<span style=color:#f92672>;</span>
        size<span style=color:#f92672>++;</span>
        modCount<span style=color:#f92672>++;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>å¸¸è§„çš„é“¾è¡¨æ“ä½œäº†,å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ : <strong>æ’å…¥çš„ä¸æ˜¯èŠ‚ç‚¹æœ¬èº«,è€Œæ˜¯å®ƒçš„å¤åˆ¶</strong>.</p>
<p>åº”è¯¥è¯´,è¿™é‡Œç”¨åˆ°çš„åªæ˜¯è¿™ä¸ª<strong>èŠ‚ç‚¹çš„å€¼</strong>,è€Œä¸éœ€è¦çŸ¥é“å®ƒå‰é©±èŠ‚ç‚¹ä»¥åŠåç»§èŠ‚ç‚¹çš„ä¿¡æ¯.</p>
<p>æ‰€ä»¥å¯¹é“¾è¡¨ä»»æ„æ“ä½œå¹¶ä¸ä¼šå½±å“æ’å…¥æ—¶å‚è€ƒè¿‡çš„é‚£äº›èŠ‚ç‚¹.</p>
<h2 id=remove-1>Remove</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> E <span style=color:#a6e22e>remove</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span><span style=color:#75715e>//é»˜è®¤åˆ é™¤å¤´èŠ‚ç‚¹
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> removeFirst<span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> E <span style=color:#a6e22e>removeFirst</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> f <span style=color:#f92672>=</span> first<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>f <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span><span style=color:#75715e>//é“¾è¡¨ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NoSuchElementException<span style=color:#f92672>();</span>
        <span style=color:#66d9ef>return</span> unlinkFirst<span style=color:#f92672>(</span>f<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> E <span style=color:#a6e22e>removeLast</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span><span style=color:#75715e>//åˆ é™¤å°¾èŠ‚ç‚¹
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> l <span style=color:#f92672>=</span> last<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span><span style=color:#75715e>//é“¾è¡¨ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NoSuchElementException<span style=color:#f92672>();</span>
        <span style=color:#66d9ef>return</span> unlinkLast<span style=color:#f92672>(</span>l<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> E <span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index<span style=color:#f92672>)</span> <span style=color:#f92672>{</span><span style=color:#75715e>//åˆ é™¤æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹
</span><span style=color:#75715e></span>        checkElementIndex<span style=color:#f92672>(</span>index<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> unlink<span style=color:#f92672>(</span>node<span style=color:#f92672>(</span>index<span style=color:#f92672>));</span><span style=color:#75715e>//node(index)ä½œç”¨æ˜¯è¿”å›indexä½ç½®çš„èŠ‚ç‚¹
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span>Object o<span style=color:#f92672>)</span> <span style=color:#f92672>{</span><span style=color:#75715e>//åˆ é™¤æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæŒ‡å®šçš„å…ƒç´ 
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>o <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> x <span style=color:#f92672>=</span> first<span style=color:#f92672>;</span> x <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span> x <span style=color:#f92672>=</span> x<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>x<span style=color:#f92672>.</span><span style=color:#a6e22e>item</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                    unlink<span style=color:#f92672>(</span>x<span style=color:#f92672>);</span>
                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> x <span style=color:#f92672>=</span> first<span style=color:#f92672>;</span> x <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span> x <span style=color:#f92672>=</span> x<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>o<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>x<span style=color:#f92672>.</span><span style=color:#a6e22e>item</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
                    unlink<span style=color:#f92672>(</span>x<span style=color:#f92672>);</span>
                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>åˆ é™¤ä¹Ÿæ˜¯æ”¯æŒæŒ‡å®šä»»æ„ä½ç½®,ä»»æ„å…ƒç´ çš„.</p>
<p><img loading=lazy src=https://tvax4.sinaimg.cn/large/006P3Jr6gy1h3qkc96mhgj30p008g0ua.jpg alt="remove for LinkedList">
</p>
<p>åˆ é™¤åŒæ ·åˆ†ä¸ºä¸‰ç§æƒ…å†µ:</p>
<ul>
<li>åˆ é™¤å¤´èŠ‚ç‚¹</li>
<li>åˆ é™¤å°¾èŠ‚ç‚¹</li>
<li>åˆ é™¤ä¸­é—´èŠ‚ç‚¹</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> E <span style=color:#a6e22e>unlinkFirst</span><span style=color:#f92672>(</span>Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> f<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// assert f == first &amp;&amp; f != null;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> E element <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span><span style=color:#a6e22e>item</span><span style=color:#f92672>;</span><span style=color:#75715e>//è®°å½•è¿”å›å€¼
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> next <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>;</span><span style=color:#75715e>//è®°å½•åé©±
</span><span style=color:#75715e></span>        f<span style=color:#f92672>.</span><span style=color:#a6e22e>item</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span><span style=color:#75715e>//é‡Šæ”¾èŠ‚ç‚¹çš„èµ„æº, help GCå°±å¾ˆéªšäº†....
</span><span style=color:#75715e></span>        f<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span> <span style=color:#75715e>// help GC
</span><span style=color:#75715e></span>        first <span style=color:#f92672>=</span> next<span style=color:#f92672>;</span><span style=color:#75715e>//firstèŠ‚ç‚¹åç§»
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>next <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span>
            last <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span><span style=color:#75715e>//è‹¥é“¾è¡¨åªæœ‰ä¸€ä¸ªfirstèŠ‚ç‚¹,é‚£ä¹ˆåˆ é™¤ålastä¹Ÿä¸ºnull
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>else</span>
            next<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span><span style=color:#75715e>//å¦åˆ™nextçš„å‰é©±ç½®ä¸ºnull,è¿™é‡Œä¹Ÿå¯ä»¥å†™æˆfirst.prev=null
</span><span style=color:#75715e></span>        size<span style=color:#f92672>--;</span>
        modCount<span style=color:#f92672>++;</span>
        <span style=color:#66d9ef>return</span> element<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> E <span style=color:#a6e22e>unlinkLast</span><span style=color:#f92672>(</span>Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> l<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// assert l == last &amp;&amp; l != null;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> E element <span style=color:#f92672>=</span> l<span style=color:#f92672>.</span><span style=color:#a6e22e>item</span><span style=color:#f92672>;</span>
        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> prev <span style=color:#f92672>=</span> l<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span><span style=color:#f92672>;</span>
        l<span style=color:#f92672>.</span><span style=color:#a6e22e>item</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
        l<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span> <span style=color:#75715e>// help GC
</span><span style=color:#75715e></span>        last <span style=color:#f92672>=</span> prev<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>prev <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span>
            first <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
        <span style=color:#66d9ef>else</span>
            prev<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
        size<span style=color:#f92672>--;</span>
        modCount<span style=color:#f92672>++;</span>
        <span style=color:#66d9ef>return</span> element<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    E <span style=color:#a6e22e>unlink</span><span style=color:#f92672>(</span>Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> x<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// assert x != null;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> E element <span style=color:#f92672>=</span> x<span style=color:#f92672>.</span><span style=color:#a6e22e>item</span><span style=color:#f92672>;</span>
        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> next <span style=color:#f92672>=</span> x<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>;</span>
        <span style=color:#66d9ef>final</span> Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> prev <span style=color:#f92672>=</span> x<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span><span style=color:#f92672>;</span>

        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>prev <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            first <span style=color:#f92672>=</span> next<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
            prev<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> next<span style=color:#f92672>;</span>
            x<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>next <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            last <span style=color:#f92672>=</span> prev<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
            next<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span> <span style=color:#f92672>=</span> prev<span style=color:#f92672>;</span>
            x<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        x<span style=color:#f92672>.</span><span style=color:#a6e22e>item</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
        size<span style=color:#f92672>--;</span>
        modCount<span style=color:#f92672>++;</span>
        <span style=color:#66d9ef>return</span> element<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>é“¾è¡¨çš„æ“ä½œä¹Ÿå¾ˆç®€å•,å°±ä¸å†™é‚£ä¹ˆå¤šæ³¨é‡Šäº†(ä¸ºå·æ‡’æ‰¾ä¸ªæ¥å£).</p>
<h2 id=äºŒåˆ†æŸ¥æ‰¾>&ldquo;äºŒåˆ†æŸ¥æ‰¾&rdquo;?</h2>
<p>é“¾è¡¨çš„å­˜å–å¾ˆç®€å•,æœ¬æ¥æƒ³ç›´æ¥è·³è¿‡çš„,ä¸è¿‡è¿™æ¬¡çœ‹æºç åˆæ–°å‘ç°äº†ä¸€ä¸ªå°çš„ä¼˜åŒ–ç‚¹,å°±é¡ºä¾¿æä¸€ä¸‹.</p>
<p>åœ¨ä¸Šé¢removeæ“ä½œæ—¶æœ‰ä¸ªnode(idnex),è¿™ä¸ªå‡½æ•°åœ¨getå’Œsetä¸­ä¹Ÿç”¨åˆ°.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>node</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// assert isElementIndex(index);
</span><span style=color:#75715e></span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>index <span style=color:#f92672>&lt;</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>&gt;&gt;</span> 1<span style=color:#f92672>))</span> <span style=color:#f92672>{</span><span style=color:#75715e>//åˆ¤æ–­indexä½äºé“¾è¡¨çš„å‰åŠéƒ¨åˆ†è¿˜æ˜¯ååŠéƒ¨åˆ†
</span><span style=color:#75715e></span>            Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> x <span style=color:#f92672>=</span> first<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> index<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
                x <span style=color:#f92672>=</span> x<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>;</span>
            <span style=color:#66d9ef>return</span> x<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
            Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> x <span style=color:#f92672>=</span> last<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> size <span style=color:#f92672>-</span> 1<span style=color:#f92672>;</span> i <span style=color:#f92672>&gt;</span> index<span style=color:#f92672>;</span> i<span style=color:#f92672>--)</span>
                x <span style=color:#f92672>=</span> x<span style=color:#f92672>.</span><span style=color:#a6e22e>prev</span><span style=color:#f92672>;</span>
            <span style=color:#66d9ef>return</span> x<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>å‰é¢æåˆ°è¿‡,LinkedListæ˜¯æ”¯æŒæ“ä½œä»»æ„èŠ‚ç‚¹çš„.</p>
<p>è€Œæˆ‘ä»¬åˆçŸ¥é“,é“¾è¡¨çš„èŠ‚ç‚¹åœ°å€æ˜¯ç¦»æ•£çš„,é‚£ä¹ˆ<strong>è®¿é—®ä¸­é—´çš„èŠ‚ç‚¹ä¸€å®šè¦ä»firstèŠ‚ç‚¹å¼€å§‹éå†å—</strong>?</p>
<p>ç”±äºæ˜¯åŒå‘é“¾è¡¨,JDKåœ¨è®¿é—®Linkedlistå‰,ä¼šå…ˆç”¨<code> if (index &lt; (size >> 1))</code>åˆ¤æ–­ä¸€ä¸‹è¦è®¿é—®çš„èŠ‚ç‚¹ä½äºå‰åŠéƒ¨åˆ†è¿˜æ˜¯ååŠéƒ¨åˆ†.</p>
<p><strong>å¦‚æœæ˜¯å‰åŠéƒ¨åˆ†,å°±ä»firstèŠ‚ç‚¹å‘åéå†;</strong></p>
<p><strong>å¦‚æœæ˜¯ååŠéƒ¨åˆ†,å°±ä»lastèŠ‚ç‚¹å‘å‰éå†.</strong></p>
<p>æœ€å¥½çš„æƒ…å†µä¸‹,è¿™æ ·çš„ä¼˜åŒ–å¯ä»¥æŠŠæ—¶é—´ä»O(n)é™ä½åˆ°O(1).</p>
<p>è¿™ä¸ªé—®é¢˜å¹¶ä¸éš¾,åªè¦æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜éƒ½èƒ½å›ç­”ä¸Šæ¥.</p>
<p>é—®é¢˜åªåœ¨äº<strong>æ„è¯†</strong>.</p>
<p>å†™è¿™ä¸€éƒ¨åˆ†æ˜¯ä¸ºäº†æé†’è‡ªå·±<strong>åœ¨ä¸€äº›å°ç»†èŠ‚ä¸Šä¸è¦å¿˜äº†ä¼˜åŒ–çš„æ„è¯†</strong>.</p>
<h2 id=é˜Ÿåˆ—--åŒå‘é˜Ÿåˆ—--æ ˆ>é˜Ÿåˆ— & åŒå‘é˜Ÿåˆ— & æ ˆ</h2>
<p>LinkedListä½œä¸ºåŒå‘é“¾è¡¨,å¯ä»¥<strong>åŒæ—¶ä½œä¸ºé˜Ÿåˆ—/åŒå‘é˜Ÿåˆ—/æ ˆæ¥ä½¿ç”¨</strong>.</p>
<p>ä½œä¸ºé˜Ÿåˆ—æ—¶:</p>
<ul>
<li>peek : è¿”å›å¤´èŠ‚ç‚¹(å¹¶éåˆ é™¤)</li>
<li>poll : è¿”å›å¹¶åˆ é™¤å¤´èŠ‚ç‚¹(å‡ºé˜Ÿ)</li>
<li>offer : é˜Ÿå°¾æ–°å¢èŠ‚ç‚¹(å…¥é˜Ÿ,ç­‰åŒäºadd)</li>
</ul>
<p>ä½œä¸ºåŒå‘é˜Ÿåˆ—æ—¶:</p>
<ul>
<li>push : é˜Ÿé¦–æ–°å¢èŠ‚ç‚¹(å…¥æ ˆ)</li>
<li>pop : è¿”å›å¹¶åˆ é™¤å¤´èŠ‚ç‚¹(å‡ºæ ˆ)</li>
</ul>
<p>è¿˜æœ‰å¾ˆå¤šapi,åƒpeekFirst,pollLastç­‰ç­‰.ä¸åˆ—ä¸¾äº†.</p>
<p>apiä¸ç”¨èƒŒçš„,ç”¨åˆ°çš„æ—¶å€™å¿˜äº†,ç‚¹è¿›æºç çœ‹ä¸‹æ³¨é‡Š,ä¸€ä¸‹å°±è®°èµ·æ¥äº†.</p>
<h2 id=clone>Clone</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Returns a shallow copy of this {@code LinkedList}. (The elements
</span><span style=color:#75715e>     * themselves are not cloned.)
</span><span style=color:#75715e>     *
</span><span style=color:#75715e>     * @return a shallow copy of this {@code LinkedList} instance
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>clone</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        LinkedList<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> clone <span style=color:#f92672>=</span> superClone<span style=color:#f92672>();</span>

        <span style=color:#75715e>// Put clone into &#34;virgin&#34; state
</span><span style=color:#75715e></span>        clone<span style=color:#f92672>.</span><span style=color:#a6e22e>first</span> <span style=color:#f92672>=</span> clone<span style=color:#f92672>.</span><span style=color:#a6e22e>last</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
        clone<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span> <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
        clone<span style=color:#f92672>.</span><span style=color:#a6e22e>modCount</span> <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>

        <span style=color:#75715e>// Initialize clone with our elements
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Node<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> x <span style=color:#f92672>=</span> first<span style=color:#f92672>;</span> x <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span> x <span style=color:#f92672>=</span> x<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>)</span>
            clone<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>x<span style=color:#f92672>.</span><span style=color:#a6e22e>item</span><span style=color:#f92672>);</span>

        <span style=color:#66d9ef>return</span> clone<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>å’ŒArrayListä¸€æ ·,ä¹Ÿæ˜¯æµ…å¤åˆ¶</p>
</div>
<footer class=post-footer>
<nav class=paginav>
<a class=prev href=http://euthpic.github.io/tech/hashmap%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86/>
<span class=title>Â« ä¸Šä¸€é¡µ</span>
<br>
<span>Hashmapç®€å•åŸç†</span>
</a>
<a class=next href=http://euthpic.github.io/tech/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/>
<span class=title>ä¸‹ä¸€é¡µ Â»</span>
<br>
<span>è®¾è®¡æ¨¡å¼</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share Listç®€å•åŸç† on twitter" href="https://twitter.com/intent/tweet/?text=List%e7%ae%80%e5%8d%95%e5%8e%9f%e7%90%86&url=http%3a%2f%2feuthpic.github.io%2ftech%2flist%25E7%25AE%2580%25E5%258D%2595%25E5%258E%259F%25E7%2590%2586%2f&hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Listç®€å•åŸç† on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2feuthpic.github.io%2ftech%2flist%25E7%25AE%2580%25E5%258D%2595%25E5%258E%259F%25E7%2590%2586%2f&title=List%e7%ae%80%e5%8d%95%e5%8e%9f%e7%90%86&summary=List%e7%ae%80%e5%8d%95%e5%8e%9f%e7%90%86&source=http%3a%2f%2feuthpic.github.io%2ftech%2flist%25E7%25AE%2580%25E5%258D%2595%25E5%258E%259F%25E7%2590%2586%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Listç®€å•åŸç† on reddit" href="https://reddit.com/submit?url=http%3a%2f%2feuthpic.github.io%2ftech%2flist%25E7%25AE%2580%25E5%258D%2595%25E5%258E%259F%25E7%2590%2586%2f&title=List%e7%ae%80%e5%8d%95%e5%8e%9f%e7%90%86"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Listç®€å•åŸç† on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2feuthpic.github.io%2ftech%2flist%25E7%25AE%2580%25E5%258D%2595%25E5%258E%259F%25E7%2590%2586%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Listç®€å•åŸç† on whatsapp" href="https://api.whatsapp.com/send?text=List%e7%ae%80%e5%8d%95%e5%8e%9f%e7%90%86%20-%20http%3a%2f%2feuthpic.github.io%2ftech%2flist%25E7%25AE%2580%25E5%258D%2595%25E5%258E%259F%25E7%2590%2586%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Listç®€å•åŸç† on telegram" href="https://telegram.me/share/url?text=List%e7%ae%80%e5%8d%95%e5%8e%9f%e7%90%86&url=http%3a%2f%2feuthpic.github.io%2ftech%2flist%25E7%25AE%2580%25E5%258D%2595%25E5%258E%259F%25E7%2590%2586%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=http://euthpic.github.io/>ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>